"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[6737],{5241:function(t,e,i){i.d(e,{a:function(){return u},g:function(){return n},i:function(){return c},t:function(){return o}});var r=i(9988);const n=t=>t.amount_off&&t.currency?s({amount:t.amount_off,currency:t.currency}):t.percent_off?(0|t.percent_off)+"% off":"",s=({amount:t,currency:e})=>{const i=((t,e)=>["bif","clp","djf","gnf","jpy","kmf","krw"].includes(e)?t:t/100)(t,e);return`${new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(parseFloat(i.toFixed(2)))}`},u=(t="usd")=>{const[e]=new Intl.NumberFormat(void 0,{style:"currency",currency:t}).formatToParts();return null==e?void 0:e.value},o=(t,e,i=(0,r._)("every","surecart"),n=(0,r._)("once","surecart"),s=!1)=>{switch(e){case"day":return`${i} ${(0,r.s)(s?(0,r.a)("%d day","%d days",t,"surecart"):(0,r.a)("day","%d days",t,"surecart"),t)}`;case"week":return`${i} ${(0,r.s)(s?(0,r.a)("%d week","%d weeks",t,"surecart"):(0,r.a)("week","%d weeks",t,"surecart"),t)}`;case"month":return`${i} ${(0,r.s)(s?(0,r.a)("%d month","%d months",t,"surecart"):(0,r.a)("month","%d months",t,"surecart"),t)}`;case"year":return`${i} ${(0,r.s)(s?(0,r.a)("%d year","%d years",t,"surecart"):(0,r.a)("year","%d years",t,"surecart"),t)}`;default:return n}},c=(t,e={})=>{if(!t)return"";const{showOnce:i,labels:n}=e,{interval:s=(0,r._)("every","surecart"),period:u=(0,r._)("for","surecart")}=n||{};return`${a(t,s,i?(0,r._)("once","surecart"):"")} ${d(t,u)}`},a=(t,e,i=(0,r._)("once","surecart"))=>t.recurring_interval_count&&t.recurring_interval?o(t.recurring_interval_count,t.recurring_interval,` ${e}`,i):"",d=(t,e,i="")=>(null==t?void 0:t.recurring_period_count)&&(null==t?void 0:t.recurring_interval)?o(((null==t?void 0:t.recurring_period_count)||0)*(null==t?void 0:t.recurring_interval_count),null==t?void 0:t.recurring_interval,` ${e}`,i,!0):""},6737:function(t,e,i){i.r(e),i.d(e,{sc_subscription_details:function(){return c},sc_subscription_status_badge:function(){return a}});var r=i(7492),n=i(9988),s=i(1479),u=i(5241),o=i(2538);i(7094);const c=class{constructor(t){(0,r.r)(this,t)}renderName(){var t,e,i,r,s;return"string"!=typeof(null===(e=null===(t=this.subscription)||void 0===t?void 0:t.price)||void 0===e?void 0:e.product)?null===(s=null===(r=null===(i=this.subscription)||void 0===i?void 0:i.price)||void 0===r?void 0:r.product)||void 0===s?void 0:s.name:(0,n._)("Subscription","surecart")}async handleSubscriptionChange(){var t,e,i,r;this.hasPendingUpdate=!!(null===(e=Object.keys((null===(t=null==this?void 0:this.subscription)||void 0===t?void 0:t.pending_update)||{}))||void 0===e?void 0:e.length),!(null===(r=null===(i=null==this?void 0:this.subscription)||void 0===i?void 0:i.pending_update)||void 0===r?void 0:r.price)||(null==this?void 0:this.pendingPrice)||this.hideRenewalText||(this.pendingPrice=await this.fetchPrice(this.subscription.pending_update.price))}componentWillLoad(){this.handleSubscriptionChange()}async fetchPrice(t){try{return this.loading=!0,await(0,s.a)({path:(0,o.a)(`surecart/v1/prices/${t}`,{expand:["product"]})})}catch(t){console.error(t)}finally{this.loading=!1}}renderRenewalText(){var t,e,i,s,o,c,a,d,l,p,h,v,_,m,y,b,g,f,w;const k=(0,r.h)("sc-subscription-status-badge",{subscription:null==this?void 0:this.subscription});return(null===(t=null==this?void 0:this.subscription)||void 0===t?void 0:t.cancel_at_period_end)&&(null===(e=null==this?void 0:this.subscription)||void 0===e?void 0:e.current_period_end_at)?(0,r.h)("span",null,k," ",(0,n.s)((0,n._)("Your plan will be canceled on","surecart"))," ",(0,r.h)("sc-format-date",{date:1e3*this.subscription.current_period_end_at,month:"long",day:"numeric",year:"numeric"})):this.hasPendingUpdate?this.pendingPrice||(null===(s=null===(i=this.subscription)||void 0===i?void 0:i.pending_update)||void 0===s?void 0:s.ad_hoc_amount)?(null===(c=null===(o=this.subscription)||void 0===o?void 0:o.pending_update)||void 0===c?void 0:c.ad_hoc_amount)?(0,r.h)("span",null,(0,n._)("Your plan switches to","surecart")," ",(0,r.h)("strong",null,(0,r.h)("sc-format-number",{type:"currency",currency:(null===(a=this.pendingPrice)||void 0===a?void 0:a.currency)||(null===(l=null===(d=this.subscription)||void 0===d?void 0:d.price)||void 0===l?void 0:l.currency),value:null===(h=null===(p=this.subscription)||void 0===p?void 0:p.pending_update)||void 0===h?void 0:h.ad_hoc_amount})," ",(0,u.i)(this.pendingPrice||(null===(v=this.subscription)||void 0===v?void 0:v.price)))," ",(0,n._)("on","surecart")," ",(0,r.h)("sc-format-date",{date:this.subscription.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):(0,r.h)("span",null,(0,n._)("Your plan switches to","surecart")," ",(0,r.h)("strong",null,this.pendingPrice.product.name)," ",(0,n._)("on","surecart")," ",(0,r.h)("sc-format-date",{date:this.subscription.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):(0,r.h)("sc-skeleton",null):"trialing"===(null===(_=null==this?void 0:this.subscription)||void 0===_?void 0:_.status)&&(null===(m=null==this?void 0:this.subscription)||void 0===m?void 0:m.trial_end_at)?(0,r.h)("span",null,k," ",(0,n.s)((0,n._)("Your plan begins on","surecart"))," ",(0,r.h)("sc-format-date",{date:null===(y=null==this?void 0:this.subscription)||void 0===y?void 0:y.trial_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):"active"===(null===(b=this.subscription)||void 0===b?void 0:b.status)&&(null===(g=this.subscription)||void 0===g?void 0:g.current_period_end_at)?(0,r.h)("span",null,k," ",null===(null===(f=this.subscription)||void 0===f?void 0:f.remaining_period_count)?(0,n._)("Your plan renews on","surecart"):(0,n._)("Your next payment is on")," ",(0,r.h)("sc-format-date",{date:null===(w=null==this?void 0:this.subscription)||void 0===w?void 0:w.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):k}render(){var t,e,i,s,o;return(0,r.h)("div",{class:"subscription-details"},(0,r.h)("sc-text",{style:{"--font-weight":"var(--sc-font-weight-bold)"}},this.renderName()," ",this.hasPendingUpdate&&(0,r.h)("sc-tag",{size:"small"},(0,n._)("Update Scheduled","surecart"))),(0,r.h)("div",null,(0,r.h)("sc-format-number",{type:"currency",currency:null===(e=null===(t=this.subscription)||void 0===t?void 0:t.latest_invoice)||void 0===e?void 0:e.currency,value:null===(s=null===(i=this.subscription)||void 0===i?void 0:i.latest_invoice)||void 0===s?void 0:s.total_amount})," ",(0,u.i)(null===(o=this.subscription)||void 0===o?void 0:o.price)),!this.hideRenewalText&&(0,r.h)("div",null,this.renderRenewalText()))}static get watchers(){return{subscription:["handleSubscriptionChange"]}}};c.style=":host{display:block}.subscription-details{display:grid;gap:0.25em;color:var(--sc-input-label-color)}";const a=class{constructor(t){(0,r.r)(this,t),this.size="medium",this.pill=!1,this.clearable=!1}getType(){var t,e;if(null===(t=this.subscription)||void 0===t?void 0:t.cancel_at_period_end)return"info";switch(this.status||(null===(e=this.subscription)||void 0===e?void 0:e.status)){case"incomplete":case"past_due":case"unpaid":return"warning";case"trialing":return"info";case"active":case"completed":return"success";case"canceled":return"danger"}}getText(){var t,e,i;if((null===(t=this.subscription)||void 0===t?void 0:t.cancel_at_period_end)&&this.subscription.current_period_end_at)return(0,r.h)(r.F,null,(0,n._)("Cancels","surecart")," ",(0,r.h)("sc-format-date",{type:"timestamp",date:this.subscription.current_period_end_at,month:"short",day:"numeric"}));switch(this.status||(null===(e=this.subscription)||void 0===e?void 0:e.status)){case"incomplete":return(0,n._)("Incomplete","surecart");case"trialing":return(0,n._)("Trialing","surecart");case"active":return Number.isInteger(null===(i=this.subscription)||void 0===i?void 0:i.remaining_period_count)?(0,n._)("Payment Plan","surecart"):(0,n._)("Active","surecart");case"past_due":return(0,n._)("Past Due","surecart");case"canceled":return(0,n._)("Canceled","surecart");case"completed":return(0,n._)("Completed","surecart");case"unpaid":return(0,n._)("Unpaid","surecart")}}render(){return(0,r.h)("sc-tag",{type:this.getType()},this.getText())}};a.style=":host{display:inline-block}"}}]);
//# sourceMappingURL=6737.js.map