{"version":3,"file":"5591.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components/dist/esm/price-ca142cc6.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/sc-coupon-form.entry.js"],"sourcesContent":["import { _ as __, s as sprintf, a as _n } from './default-i18n-c67eee5a.js';\n\nconst convertAmount = (amount, currency) => {\n  return ['bif', 'clp', 'djf', 'gnf', 'jpy', 'kmf', 'krw'].includes(currency) ? amount : amount / 100;\n};\nconst getHumanDiscount = (coupon) => {\n  if (coupon.amount_off && coupon.currency) {\n    return getFormattedPrice({ amount: coupon.amount_off, currency: coupon.currency });\n  }\n  if (coupon.percent_off) {\n    // TODO: Translators.\n    return `${coupon.percent_off | 0}% off`;\n  }\n  return '';\n};\nconst getFormattedPrice = ({ amount, currency }) => {\n  const converted = convertAmount(amount, currency);\n  return `${new Intl.NumberFormat(undefined, {\n    style: 'currency',\n    currency: currency,\n  }).format(parseFloat(converted.toFixed(2)))}`;\n};\n// get the currency symbol for a currency code.\nconst getCurrencySymbol = (code = 'usd') => {\n  const [currency] = new Intl.NumberFormat(undefined, {\n    style: 'currency',\n    currency: code,\n  }).formatToParts();\n  return currency === null || currency === void 0 ? void 0 : currency.value;\n};\nconst translateInterval = (amount, interval, prefix = __('every', 'surecart'), fallback = __('once', 'surecart'), showSingle = false) => {\n  switch (interval) {\n    case 'day':\n      return `${prefix} ${sprintf(showSingle ? _n('%d day', '%d days', amount, 'surecart') : _n('day', '%d days', amount, 'surecart'), amount)}`;\n    case 'week':\n      return `${prefix} ${sprintf(showSingle ? _n('%d week', '%d weeks', amount, 'surecart') : _n('week', '%d weeks', amount, 'surecart'), amount)}`;\n    case 'month':\n      return `${prefix} ${sprintf(showSingle ? _n('%d month', '%d months', amount, 'surecart') : _n('month', '%d months', amount, 'surecart'), amount)}`;\n    case 'year':\n      return `${prefix} ${sprintf(showSingle ? _n('%d year', '%d years', amount, 'surecart') : _n('year', '%d years', amount, 'surecart'), amount)}`;\n    default:\n      return fallback;\n  }\n};\nconst intervalString = (price, options = {}) => {\n  if (!price) {\n    return '';\n  }\n  const { showOnce, labels } = options;\n  const { interval = __('every', 'surecart'), period = __('for', 'surecart') } = labels || {};\n  return `${intervalCountString(price, interval, !!showOnce ? __('once', 'surecart') : '')} ${periodCountString(price, period)}`;\n};\nconst intervalCountString = (price, prefix, fallback = __('once', 'surecart')) => {\n  if (!price.recurring_interval_count || !price.recurring_interval) {\n    return '';\n  }\n  return translateInterval(price.recurring_interval_count, price.recurring_interval, ` ${prefix}`, fallback);\n};\nconst periodCountString = (price, prefix, fallback = '') => {\n  if (!(price === null || price === void 0 ? void 0 : price.recurring_period_count) || !(price === null || price === void 0 ? void 0 : price.recurring_interval)) {\n    return '';\n  }\n  return translateInterval(((price === null || price === void 0 ? void 0 : price.recurring_period_count) || 0) * (price === null || price === void 0 ? void 0 : price.recurring_interval_count), price === null || price === void 0 ? void 0 : price.recurring_interval, ` ${prefix}`, fallback, true);\n};\n\nexport { getCurrencySymbol as a, getHumanDiscount as g, intervalString as i, translateInterval as t };\n","import { r as registerInstance, c as createEvent, h } from './index-430bb51b.js';\nimport { _ as __ } from './default-i18n-c67eee5a.js';\nimport { g as getHumanDiscount } from './price-ca142cc6.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scCouponFormCss = \":host{display:block}.coupon-form{position:relative}.form{opacity:0;visibility:hidden;height:0;transition:opacity var(--sc-transition-fast) ease-in-out}.coupon-form--is-open .form{opacity:1;visibility:visible;height:auto;margin-top:var(--sc-spacing-small);display:grid;gap:var(--sc-spacing-small)}.coupon-form--is-open .trigger{color:var(--sc-input-label-color)}.coupon-form--is-open .trigger:hover{text-decoration:none}.trigger{cursor:pointer;font-size:var(--sc-font-size-small);color:var(--sc-color-gray-500);user-select:none}.trigger:hover{text-decoration:underline}\";\n\nconst ScCouponForm = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.scApplyCoupon = createEvent(this, \"scApplyCoupon\", 7);\n  }\n  /** Auto focus the input when opened. */\n  handleOpenChange(val) {\n    if (val) {\n      setTimeout(() => this.input.triggerFocus(), 50);\n    }\n  }\n  /** Close it when blurred and no value. */\n  handleBlur() {\n    if (!this.input.value) {\n      this.open = false;\n      this.error = '';\n    }\n  }\n  /** Apply the coupon. */\n  applyCoupon() {\n    this.scApplyCoupon.emit(this.input.value.toUpperCase());\n  }\n  render() {\n    var _a, _b, _c, _d, _e, _f;\n    if (this.loading) {\n      return h(\"sc-skeleton\", { style: { width: '120px', display: 'inline-block' } });\n    }\n    if ((_b = (_a = this === null || this === void 0 ? void 0 : this.discount) === null || _a === void 0 ? void 0 : _a.promotion) === null || _b === void 0 ? void 0 : _b.code) {\n      let humanDiscount = '';\n      if ((_c = this === null || this === void 0 ? void 0 : this.discount) === null || _c === void 0 ? void 0 : _c.coupon) {\n        humanDiscount = getHumanDiscount((_d = this === null || this === void 0 ? void 0 : this.discount) === null || _d === void 0 ? void 0 : _d.coupon);\n      }\n      return (h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, h(\"div\", null, __('Discount')), h(\"sc-tag\", { type: \"success\", class: \"coupon-tag\", clearable: true, onScClear: () => {\n          this.scApplyCoupon.emit(null);\n          this.open = false;\n        } }, (_f = (_e = this === null || this === void 0 ? void 0 : this.discount) === null || _e === void 0 ? void 0 : _e.promotion) === null || _f === void 0 ? void 0 : _f.code)), humanDiscount && (h(\"span\", { class: \"coupon-human-discount\", slot: \"price-description\" }, \"(\", humanDiscount, \")\")), h(\"span\", { slot: \"price\" }, h(\"sc-format-number\", { type: \"currency\", currency: this === null || this === void 0 ? void 0 : this.currency, value: this === null || this === void 0 ? void 0 : this.discountAmount }))));\n    }\n    return (h(\"div\", { class: {\n        'coupon-form': true,\n        'coupon-form--is-open': this.open || this.forceOpen,\n      } }, h(\"div\", { class: \"trigger\", onMouseDown: () => {\n        if (this.open) {\n          return;\n        }\n        this.open = true;\n      } }, h(\"slot\", { name: \"label\" }, this.label)), h(\"div\", { class: \"form\" }, h(\"sc-input\", { onScBlur: () => this.handleBlur(), ref: el => (this.input = el), clearable: true }), !!this.error && (h(\"sc-alert\", { type: \"danger\", open: true }, h(\"span\", { slot: \"title\" }, this.error))), h(\"sc-button\", { type: \"primary\", loading: this.busy, full: true, onClick: () => this.applyCoupon() }, h(\"slot\", null))), this.loading && h(\"sc-block-ui\", null)));\n  }\n  static get watchers() { return {\n    \"open\": [\"handleOpenChange\"]\n  }; }\n};\nScCouponForm.style = scCouponFormCss;\n\nexport { ScCouponForm as sc_coupon_form };\n"],"names":["getHumanDiscount","coupon","amount_off","currency","getFormattedPrice","amount","percent_off","converted","includes","convertAmount","Intl","NumberFormat","undefined","style","format","parseFloat","toFixed","getCurrencySymbol","code","formatToParts","value","translateInterval","interval","prefix","_","fallback","showSingle","s","intervalString","price","options","showOnce","labels","period","intervalCountString","periodCountString","recurring_interval_count","recurring_interval","recurring_period_count","ScCouponForm","constructor","hostRef","r","this","scApplyCoupon","c","handleOpenChange","val","setTimeout","input","triggerFocus","handleBlur","open","error","applyCoupon","emit","toUpperCase","render","_a","_b","_c","_d","_e","_f","loading","h","width","display","discount","promotion","humanDiscount","g","slot","type","class","clearable","onScClear","discountAmount","forceOpen","onMouseDown","name","label","onScBlur","ref","el","busy","full","onClick","watchers"],"sourceRoot":""}