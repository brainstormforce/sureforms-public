{"version":3,"file":"4384.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components/dist/esm/consumer-1db89974.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/index-e534c726.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/sc-line-item-total.entry.js"],"sourcesContent":["import { g as getElement } from './index-430bb51b.js';\n\nvar createDeferredPromise = function () {\n    var resolve;\n    var promise = new Promise(function (res) { resolve = res; });\n    return { promise: promise, resolve: resolve };\n};\n\nvar openWormhole = function (Component, props, isBlocking) {\n    if (isBlocking === void 0) { isBlocking = true; }\n    var isConstructor = (Component.constructor.name === 'Function');\n    var Proto = isConstructor ? Component.prototype : Component;\n    var componentWillLoad = Proto.componentWillLoad;\n    Proto.componentWillLoad = function () {\n        var _this = this;\n        var el = getElement(this);\n        var onOpen = createDeferredPromise();\n        var event = new CustomEvent('openWormhole', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                consumer: this,\n                fields: props,\n                updater: function (prop, value) {\n                    var target = (prop in el) ? el : _this;\n                    target[prop] = value;\n                },\n                onOpen: onOpen,\n            },\n        });\n        el.dispatchEvent(event);\n        var willLoad = function () {\n            if (componentWillLoad) {\n                return componentWillLoad.call(_this);\n            }\n        };\n        return isBlocking ? onOpen.promise.then(function () { return willLoad(); }) : (willLoad());\n    };\n};\n\nexport { openWormhole as o };\n","const convertLineItemsToLineItemData = (lineItems) => {\n  return ((lineItems === null || lineItems === void 0 ? void 0 : lineItems.data) || []).map(item => {\n    return {\n      price_id: item.price.id,\n      quantity: item.quantity,\n    };\n  });\n};\n/**\n * Get price ids from line items\n * @param order\n * @returns\n */\nconst getLineItemPriceIds = (line_items) => {\n  return ((line_items === null || line_items === void 0 ? void 0 : line_items.data) || []).map(item => item.price.id);\n};\n/**\n * Is the price in a checkout session\n */\nconst isPriceInOrder = (price, order) => {\n  const priceIds = getLineItemPriceIds(order === null || order === void 0 ? void 0 : order.line_items);\n  return !!priceIds.find(id => (price === null || price === void 0 ? void 0 : price.id) === id);\n};\n/** Check if the order has a subscription */\nconst hasSubscription = (order) => {\n  var _a, _b, _c;\n  // no line items.\n  if (!((_b = (_a = order === null || order === void 0 ? void 0 : order.line_items) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.length))\n    return false;\n  // has subscription product.\n  return (_c = order === null || order === void 0 ? void 0 : order.line_items.data) === null || _c === void 0 ? void 0 : _c.some(item => { var _a; return (_a = item === null || item === void 0 ? void 0 : item.price) === null || _a === void 0 ? void 0 : _a.recurring_interval_count; });\n};\n/** Check if the order has a payment plan. */\nconst hasPaymentPlan = (order) => {\n  var _a;\n  return hasSubscription(order) && ((_a = order === null || order === void 0 ? void 0 : order.line_items.data) === null || _a === void 0 ? void 0 : _a.some(item => { var _a; return (_a = item === null || item === void 0 ? void 0 : item.price) === null || _a === void 0 ? void 0 : _a.recurring_period_count; }));\n};\n\nexport { hasPaymentPlan as a, convertLineItemsToLineItemData as c, hasSubscription as h, isPriceInOrder as i };\n","import { r as registerInstance, h } from './index-430bb51b.js';\nimport { o as openWormhole } from './consumer-1db89974.js';\nimport { _ as __ } from './default-i18n-c67eee5a.js';\nimport { a as hasPaymentPlan } from './index-e534c726.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scLineItemTotalCss = \":host{display:block}.line-item-total__group sc-line-item{margin:4px 0px !important}\";\n\nconst ScLineItemTotal = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.total = 'total';\n    this.session_key = {\n      total: 'total_amount',\n      subtotal: 'subtotal_amount',\n    };\n  }\n  render() {\n    var _a, _b, _c;\n    // loading state\n    if (this.loading) {\n      return (h(\"sc-line-item\", null, h(\"sc-skeleton\", { slot: \"title\", style: { width: '120px', display: 'inline-block' } }), h(\"sc-skeleton\", { slot: \"price\", style: { 'width': '70px', 'display': 'inline-block', 'height': this.size === 'large' ? '40px' : '', '--border-radius': '6px' } })));\n    }\n    if (!((_a = this.order) === null || _a === void 0 ? void 0 : _a.currency))\n      return;\n    if (this.total === 'total' && (this.order.trial_amount !== 0 || hasPaymentPlan(this.order))) {\n      return (h(\"div\", { class: \"line-item-total__group\" }, h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, h(\"slot\", { name: \"description\" })), h(\"span\", { slot: \"price\" }, h(\"sc-total\", { order: this.order, total: this.total }))), h(\"sc-line-item\", { style: { '--price-size': 'var(--sc-font-size-x-large)' } }, h(\"span\", { slot: \"title\" }, __('Total Due Today', 'surecart')), h(\"span\", { slot: \"description\" }, h(\"slot\", { name: \"description\" })), h(\"span\", { slot: \"price\" }, h(\"sc-format-number\", { type: \"currency\", currency: (_b = this.order) === null || _b === void 0 ? void 0 : _b.currency, value: (_c = this.order) === null || _c === void 0 ? void 0 : _c.amount_due })))));\n    }\n    return (h(\"sc-line-item\", { style: this.size === 'large' ? { '--price-size': 'var(--sc-font-size-x-large)' } : {} }, h(\"span\", { slot: \"title\" }, h(\"slot\", { name: \"title\" })), h(\"span\", { slot: \"description\" }, h(\"slot\", { name: \"description\" })), h(\"span\", { slot: \"price\" }, h(\"sc-total\", { order: this.order, total: this.total }))));\n  }\n};\nopenWormhole(ScLineItemTotal, ['order', 'loading', 'calculating'], false);\nScLineItemTotal.style = scLineItemTotalCss;\n\nexport { ScLineItemTotal as sc_line_item_total };\n"],"names":["openWormhole","Component","props","isBlocking","Proto","constructor","name","prototype","componentWillLoad","resolve","_this","this","el","g","onOpen","promise","Promise","res","event","CustomEvent","bubbles","composed","detail","consumer","fields","updater","prop","value","dispatchEvent","willLoad","call","then","convertLineItemsToLineItemData","lineItems","data","map","item","price_id","price","id","quantity","isPriceInOrder","order","line_items","find","hasSubscription","_a","_b","_c","length","some","recurring_interval_count","hasPaymentPlan","recurring_period_count","ScLineItemTotal","hostRef","r","total","session_key","subtotal","render","loading","h","slot","style","width","display","size","currency","trial_amount","class","_","type","amount_due","o"],"sourceRoot":""}