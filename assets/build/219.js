"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[219],{3297:function(r,n,e){e.d(n,{a:function(){return s},g:function(){return t},i:function(){return u},t:function(){return c}});var o=e(290);const t=r=>r.amount_off&&r.currency?i({amount:r.amount_off,currency:r.currency}):r.percent_off?(0|r.percent_off)+"% off":"",i=({amount:r,currency:n})=>{const e=((r,n)=>["bif","clp","djf","gnf","jpy","kmf","krw"].includes(n)?r:r/100)(r,n);return`${new Intl.NumberFormat(void 0,{style:"currency",currency:n}).format(parseFloat(e.toFixed(2)))}`},s=(r="usd")=>{const[n]=new Intl.NumberFormat(void 0,{style:"currency",currency:r}).formatToParts();return null==n?void 0:n.value},c=(r,n,e=(0,o._)("every","surecart"),t=(0,o._)("once","surecart"),i=!1)=>{switch(n){case"day":return`${e} ${(0,o.s)(i?(0,o.a)("%d day","%d days",r,"surecart"):(0,o.a)("day","%d days",r,"surecart"),r)}`;case"week":return`${e} ${(0,o.s)(i?(0,o.a)("%d week","%d weeks",r,"surecart"):(0,o.a)("week","%d weeks",r,"surecart"),r)}`;case"month":return`${e} ${(0,o.s)(i?(0,o.a)("%d month","%d months",r,"surecart"):(0,o.a)("month","%d months",r,"surecart"),r)}`;case"year":return`${e} ${(0,o.s)(i?(0,o.a)("%d year","%d years",r,"surecart"):(0,o.a)("year","%d years",r,"surecart"),r)}`;default:return t}},u=(r,n={})=>{if(!r)return"";const{showOnce:e,labels:t}=n,{interval:i=(0,o._)("every","surecart"),period:s=(0,o._)("for","surecart")}=t||{};return`${l(r,i,e?(0,o._)("once","surecart"):"")} ${a(r,s)}`},l=(r,n,e=(0,o._)("once","surecart"))=>r.recurring_interval_count&&r.recurring_interval?c(r.recurring_interval_count,r.recurring_interval,` ${n}`,e):"",a=(r,n,e="")=>(null==r?void 0:r.recurring_period_count)&&(null==r?void 0:r.recurring_interval)?c(((null==r?void 0:r.recurring_period_count)||0)*(null==r?void 0:r.recurring_interval_count),null==r?void 0:r.recurring_interval,` ${n}`,e,!0):""},219:function(r,n,e){e.r(n),e.d(n,{sc_coupon_form:function(){return s}});var o=e(6046),t=e(290),i=e(3297);e(5115);const s=class{constructor(r){(0,o.r)(this,r),this.scApplyCoupon=(0,o.c)(this,"scApplyCoupon",7)}handleOpenChange(r){r&&setTimeout((()=>this.input.triggerFocus()),50)}handleBlur(){this.input.value||(this.open=!1,this.error="")}applyCoupon(){this.scApplyCoupon.emit(this.input.value.toUpperCase())}render(){var r,n,e,s,c,u;if(this.loading)return(0,o.h)("sc-skeleton",{style:{width:"120px",display:"inline-block"}});if(null===(n=null===(r=null==this?void 0:this.discount)||void 0===r?void 0:r.promotion)||void 0===n?void 0:n.code){let r="";return(null===(e=null==this?void 0:this.discount)||void 0===e?void 0:e.coupon)&&(r=(0,i.g)(null===(s=null==this?void 0:this.discount)||void 0===s?void 0:s.coupon)),(0,o.h)("sc-line-item",null,(0,o.h)("span",{slot:"description"},(0,o.h)("div",null,(0,t._)("Discount")),(0,o.h)("sc-tag",{type:"success",class:"coupon-tag",clearable:!0,onScClear:()=>{this.scApplyCoupon.emit(null),this.open=!1}},null===(u=null===(c=null==this?void 0:this.discount)||void 0===c?void 0:c.promotion)||void 0===u?void 0:u.code)),r&&(0,o.h)("span",{class:"coupon-human-discount",slot:"price-description"},"(",r,")"),(0,o.h)("span",{slot:"price"},(0,o.h)("sc-format-number",{type:"currency",currency:null==this?void 0:this.currency,value:null==this?void 0:this.discountAmount})))}return(0,o.h)("div",{class:{"coupon-form":!0,"coupon-form--is-open":this.open||this.forceOpen}},(0,o.h)("div",{class:"trigger",onMouseDown:()=>{this.open||(this.open=!0)}},(0,o.h)("slot",{name:"label"},this.label)),(0,o.h)("div",{class:"form"},(0,o.h)("sc-input",{onScBlur:()=>this.handleBlur(),ref:r=>this.input=r,clearable:!0}),!!this.error&&(0,o.h)("sc-alert",{type:"danger",open:!0},(0,o.h)("span",{slot:"title"},this.error)),(0,o.h)("sc-button",{type:"primary",loading:this.busy,full:!0,onClick:()=>this.applyCoupon()},(0,o.h)("slot",null))),this.loading&&(0,o.h)("sc-block-ui",null))}static get watchers(){return{open:["handleOpenChange"]}}};s.style=":host{display:block}.coupon-form{position:relative}.form{opacity:0;visibility:hidden;height:0;transition:opacity var(--sc-transition-fast) ease-in-out}.coupon-form--is-open .form{opacity:1;visibility:visible;height:auto;margin-top:var(--sc-spacing-small);display:grid;gap:var(--sc-spacing-small)}.coupon-form--is-open .trigger{color:var(--sc-input-label-color)}.coupon-form--is-open .trigger:hover{text-decoration:none}.trigger{cursor:pointer;font-size:var(--sc-font-size-small);color:var(--sc-color-gray-500);user-select:none}.trigger:hover{text-decoration:underline}"}}]);