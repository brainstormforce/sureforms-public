@import "./mixins.scss";

.is-root-container {
	font-size: var( --srfm-font-size );
	margin-top: 2em;

	.srfm-input-common {
		width: 100%;
	}

	.srfm-block-margin-top {
		margin-top: 1.2em;
	}

	.srfm-block-wrap {
		position: relative;
		pointer-events: none;
	}

	.srfm-block-label {
		@include srfm-block-label-styles;
		display: block;
	}

	.srfm-block-text,
	.srfm-block-label {
		&.srfm-required::after {
			content: " *";
			color: var( --srfm-error-text-color );
		}
	}

	.srfm-input-common {
		@include srfm-input-common-styles;
	}

	.srfm-with-icon {
		.srfm-input-common {
			padding-left: 2.4em;
		}

		.srfm-input-icon {
			display: block;
			position: absolute;
			top: 50%;
			left: 0.7em;
			transform: translateY( -50% );
			line-height: 0;

			svg {
				width: 0.9em;
				height: 0.9em;
				stroke: var( --srfm-body-input-color );

				path {
					stroke: var( --srfm-body-input-color );
				}
			}
		}
	}

	.srfm-description {
		display: block;
		font-size: 0.7em;
		margin-top: 0.571em;
		font-weight: 400;
		line-height: normal;
		color: var( --srfm-help-color );
	}

	// URL.
	div[data-type="srfm/url"] {
		.srfm-protocol {
			color: var( --srfm-label-text-color );
			position: absolute;
			top: 50%;
			left: 0;
			transform: translateY( -50% );
			width: inherit;
			width: 5.5em;
			height: 100%;
			display: flex;
			align-items: center;
			border-top-left-radius: var( --srfm-border-radius );
			border-bottom-left-radius: var( --srfm-border-radius );
			border-right: var( --srfm-border ) solid var( --srfm-border-color );
			padding-left: 1em;
			padding-right: 1em;
			font-size: 0.7em;
		}

		.srfm-input-url {
			padding-left: 6.4375em;
		}
	}

	// apply to normal address block
	.srfm-address-block-container {
		margin-top: -0.5em;

		.srfm-address-block-label {
			padding: 0 0.3em;
			margin-top: 1em;
		}

		.srfm-address-help-txt {
			padding: 0 0.3em;
		}
	}

	// Address block styles.
	.srfm-address-block-wrap {
		padding-left: 0 !important;
		padding-right: 0 !important;
		margin-bottom: 0 !important;
		.block-editor-inner-blocks {
			.block-editor-block-list__layout {
				.block-editor-block-list__block {
					margin-top: 0.5em !important;
				}
			}
		}
		.block-editor-block-list__block,
		.block-list-appender {
			margin-top: 1em !important;
		}
	}

	// Address compact block styles.
	div[data-type="srfm/address-compact"] {
		.srfm-block-wrap {
			display: flex;
			flex-wrap: wrap;

			.srfm-input-common {
				border-radius: 0;
				border-bottom-width: 0;
				padding-right: 0.875em;
				&:nth-child( 1 ) {
					border-top-left-radius: var( --srfm-border-radius );
					border-top-right-radius: var( --srfm-border-radius );
				}
				&:nth-last-child( 1 ) {
					border-bottom-width: var( --srfm-border );
					border-bottom-left-radius: var( --srfm-border-radius );
					border-bottom-right-radius: var( --srfm-border-radius );
				}

				&.srfm-input-address-compact-city,
				&.srfm-input-address-compact-state {
					width: 50%;
				}

				&.srfm-input-address-compact-state {
					border-left: 0;
				}

				&.srfm-input-address-compact-country {
					-webkit-appearance: none;
					-moz-appearance: none;
					text-indent: 1px;
				}
			}

			.srfm-address-compact-country-wrap {
				position: relative;
				width: 100%;

				.srfm-input-address-compact-country {
					border-radius: 0;
					border-bottom: 0;
				}

				.srfm-address-compact-icon {
					position: absolute;
					top: 50%;
					right: 15px;
					transform: translateY( -50% );
					width: 18px;
					line-height: 0;
					transition: 0.2s ease;
					cursor: pointer;
				}
			}
		}
	}

	// Address
	div[data-type="srfm/address"] {
		.srfm-block-wrap {
			display: flex;
			flex-wrap: wrap;

			.srfm-input-common {
				border-radius: 0;
				border-bottom-width: 0;
				padding-right: 0.875em;
				&:nth-child( 1 ) {
					border-top-left-radius: var( --srfm-border-radius );
					border-top-right-radius: var( --srfm-border-radius );
				}
				&:nth-last-child( 1 ) {
					border-bottom-width: var( --srfm-border );
					border-bottom-left-radius: var( --srfm-border-radius );
					border-bottom-right-radius: var( --srfm-border-radius );
				}

				// &.srfm-input-address-city,
				// &.srfm-input-address-state {
				// 	width: 50%;
				// }

				// &.srfm-input-address-state {
				// 	border-left: 0;
				// }

				// &.srfm-input-address-country {
				// 	-webkit-appearance: none;
				// 	-moz-appearance: none;
				// 	text-indent: 1px;
				// }
			}

			// .srfm-address-country-wrap {
			// 	position: relative;
			// 	width: 100%;

			// 	.srfm-input-address-country {
			// 		border-radius: 0;
			// 		border-bottom: 0;
			// 	}

			// 	.srfm-address-icon {
			// 		position: absolute;
			// 		top: 50%;
			// 		right: 15px;
			// 		transform: translateY( -50% );
			// 		width: 18px;
			// 		line-height: 0;
			// 		transition: 0.2s ease;
			// 		cursor: pointer;
			// 	}
			// }
		}
	}

	// Number
	div[data-type="srfm/number"] {
		.srfm-input-number {
			&::-webkit-inner-spin-button,
			&::-webkit-outer-spin-button {
				appearance: none;
			}
		}
	}

	//Checkbox & GDPR.
	div[data-type="srfm/checkbox"],
	div[data-type="srfm/gdpr"] {
		.srfm-block-wrap {
			input {
				margin: 0;
				border: 1px solid var( --srfm-border-color );
				box-shadow: none;
				background-color: var( --srfm-base-background-color );
			}

			.srfm-block-text {
				font-size: 0.7em;
				padding-left: 8px;
				line-height: 18px;
				pointer-events: all;
				color: var( --srfm-label-text-color );
			}
		}
	}

	// Multi select.
	div[data-type="srfm/multi-choice"] {
		&.is-selected {
			.srfm-block-wrap {
				pointer-events: initial;
			}
		}

		.srfm-block-wrap {
			display: flex;
			flex-wrap: wrap;
			margin: 0 -0.3em;
			row-gap: 0.6em;

			@media ( min-width: 431px ) {
				&.srfm-choice-width-100 {
					.srfm-multi-choice-single {
						width: 100%;
					}
				}

				&.srfm-choice-width-50 {
					.srfm-multi-choice-single {
						width: 50%;
					}
				}

				&.srfm-choice-width-33-33 {
					.srfm-multi-choice-single {
						width: 33%;
					}
				}

				&.srfm-choice-width-25 {
					.srfm-multi-choice-single {
						width: 25%;
					}
				}
			}

			.srfm-multi-choice-single {
				padding: 0 0.3em;
				cursor: pointer;
				margin: 0;

				.srfm-input-common {
					width: calc( 100% - 3em );
				}

				.components-button {
					width: 1em;
					height: 1em;
					padding: 1em;
				}

				.srfm-block-content-wrap {
					position: relative;
					display: flex;
					flex-wrap: wrap;
					align-items: flex-start;
					font-size: 0.7em;
					padding: 0.72em 1.143em 0.72em 0.72em;
					background-color: var( --srfm-base-background-color );
					border: var( --srfm-border ) solid var( --srfm-border-color );
					border-radius: var( --srfm-border-radius );
					width: auto;
					height: 100%;

					.srfm-multi-choice-icon {
						position: relative;
						width: 1em;
						height: 1em;
						top: 0.18em;
						border-radius: 100%;
						border: 1px solid var( --srfm-border-color );
						border-radius: 100%;
						line-height: 1.5em;

						svg {
							position: absolute;
							top: 0;
							width: 1em;
							height: 1em;
							opacity: 0;
						}
					}

					p {
						font-size: 1em;
						line-height: normal;
						padding-left: 0.575em;
						width: calc( 100% - 1em );
						color: var( --srfm-body-input-color );
						margin-top: 0;
						margin-bottom: 0;
						word-break: break-word;
					}
				}

				@media ( max-width: 430px ) {
					width: 100%;
				}
			}

			.srfm-multi-choice-add-option-wrapper {
				width: 100%;
			}
		}
	}

	// Phone.
	div[data-type="srfm/phone"] {
		.flag-container {
			.arrow {
				&:after {
					background-color: transparent;
					color: var( --srfm-body-input-color );
				}
			}
		}
	}

	// Select / Dropdown
	div[data-type="srfm/address-compact"],
	div[data-type="srfm/dropdown"] {
		.srfm-dropdown-common-wrap {
			position: relative;
			width: 100%;
			color: var( --srfm-placeholder-color );

			input[type="text"] {
				padding-right: 2em;
				&:placeholder-shown {
					text-overflow: ellipsis;
				}
			}

			input[type="text"].srfm-address-country-wrap {
				padding-right: 2.2em;
				border-bottom: 0;
				border-radius: 0;
			}

			.srfm-input-common {
				width: 100%;
			}

			&::after {
				content: "";
				position: absolute;
				width: 0.5em;
				height: 0.5em;
				font-size: 0.7em;
				border: 1px solid var( --srfm-body-input-color );
				border-left: 0;
				border-top: 0;
				transform: rotate( 45deg );
				right: 1em;
				top: 1em;
			}
		}
	}
}
