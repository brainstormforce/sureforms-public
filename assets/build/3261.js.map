{"version":3,"file":"3261.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components-react/node_modules/@surecart/components/dist/esm/sc-subscription-cancel.entry.js"],"sourcesContent":["import { r as registerInstance, h, F as Fragment } from './index-430bb51b.js';\nimport { _ as __ } from './default-i18n-c67eee5a.js';\nimport { a as apiFetch } from './fetch-d56a3ec0.js';\nimport { a as addQueryArgs } from './add-query-args-f4c5962b.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scSubscriptionCancelCss = \":host{display:block;position:relative}.subscription-cancel{display:grid;gap:0.5em}\";\n\nconst ScSubscriptionCancel = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n  }\n  componentWillLoad() {\n    this.fetchItems();\n  }\n  async fetchItems() {\n    try {\n      this.loading = true;\n      await Promise.all([this.fetchProtocol(), this.fetchSubscription()]);\n    }\n    catch (e) {\n      console.error(this.error);\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.loading = false;\n    }\n  }\n  async fetchProtocol() {\n    this.protocol = (await apiFetch({\n      path: '/surecart/v1/subscription_protocol',\n    }));\n  }\n  async fetchSubscription() {\n    if (!this.subscriptionId)\n      return;\n    this.subscription = (await apiFetch({\n      path: addQueryArgs(`/surecart/v1/subscriptions/${this.subscriptionId}`, {\n        expand: ['price', 'price.product', 'latest_invoice', 'product'],\n      }),\n    }));\n  }\n  async cancelSubscription() {\n    try {\n      this.error = '';\n      this.busy = true;\n      await apiFetch({\n        path: `/surecart/v1/subscriptions/${this.subscriptionId}/cancel`,\n        method: 'PATCH',\n      });\n      if (this.successUrl) {\n        window.location.assign(this.successUrl);\n      }\n      else {\n        this.busy = false;\n      }\n    }\n    catch (e) {\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n      this.busy = false;\n    }\n  }\n  renderContent() {\n    var _a, _b;\n    if (this.loading) {\n      return this.renderLoading();\n    }\n    return (h(Fragment, null, h(\"sc-subscription-details\", { subscription: this === null || this === void 0 ? void 0 : this.subscription, hideRenewalText: true }), ((_a = this === null || this === void 0 ? void 0 : this.protocol) === null || _a === void 0 ? void 0 : _a.cancel_behavior) === 'pending' ? (h(\"sc-alert\", { type: \"info\", open: true }, __('Your plan will be canceled, but is still available until the end of your billing period on', 'surecart'), ' ', h(\"strong\", null, h(\"sc-format-date\", { type: \"timestamp\", date: (_b = this === null || this === void 0 ? void 0 : this.subscription) === null || _b === void 0 ? void 0 : _b.current_period_end_at, month: \"long\", day: \"numeric\", year: \"numeric\" })), \". \", __('If you change your mind, you can renew your subscription.', 'surecart'))) : (h(\"sc-alert\", { type: \"info\", open: true }, __('Your plan will be canceled immediately. You cannot change your mind.', 'surecart')))));\n  }\n  renderLoading() {\n    return (h(\"div\", { style: { padding: '0.5em' } }, h(\"sc-skeleton\", { style: { width: '30%', marginBottom: '0.75em' } }), h(\"sc-skeleton\", { style: { width: '20%', marginBottom: '0.75em' } }), h(\"sc-skeleton\", { style: { width: '40%' } })));\n  }\n  render() {\n    return (h(\"sc-dashboard-module\", { heading: this.heading || __('Cancel your plan', 'surecart'), class: \"subscription-cancel\", error: this.error }, h(\"sc-card\", null, this.renderContent(), h(\"sc-button\", { type: \"primary\", full: true, loading: this.loading || this.busy, disabled: this.loading || this.busy, onClick: () => this.cancelSubscription() }, __('Cancel Plan', 'surecart')), !!this.backUrl && (h(\"sc-button\", { href: this.backUrl, full: true, loading: this.loading || this.busy, disabled: this.loading || this.busy }, __('Go Back', 'surecart')))), this.busy && h(\"sc-block-ui\", null)));\n  }\n};\nScSubscriptionCancel.style = scSubscriptionCancelCss;\n\nexport { ScSubscriptionCancel as sc_subscription_cancel };\n"],"names":["ScSubscriptionCancel","constructor","hostRef","r","this","componentWillLoad","fetchItems","async","loading","Promise","all","fetchProtocol","fetchSubscription","e","console","error","message","_","protocol","a","path","subscriptionId","subscription","expand","busy","method","successUrl","window","location","assign","renderContent","_a","_b","renderLoading","h","F","hideRenewalText","cancel_behavior","type","open","date","current_period_end_at","month","day","year","style","padding","width","marginBottom","render","heading","class","full","disabled","onClick","cancelSubscription","backUrl","href"],"sourceRoot":""}