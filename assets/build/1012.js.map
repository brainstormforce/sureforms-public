{"version":3,"file":"1012.js","mappings":"4IACA,MAAMA,EAAiB,CAACC,EAAIC,KACG,IAAIC,OAAOC,sBAAqB,CAACC,EAASC,KACjED,EAAQ,GAAGE,kBAAoB,IACjCL,IACAI,EAASE,UAAUH,EAAQ,GAAGI,QAChC,IAEmBC,QAAQT,EAAG,C,uICDlC,MAEMU,EAAe,MACnBC,YAAYC,IACV,IAAAC,GAAiBC,KAAMF,GAEvBE,KAAKC,MAAQ,CACXC,KAAM,EACNC,SAAU,IAEZH,KAAKI,OAAS,GACdJ,KAAKK,WAAa,CAChBC,MAAO,EACPC,YAAa,EAEjB,CAEAC,qBACE,IAAAC,GAAeT,KAAKd,IAAI,KACtBc,KAAKU,cAAc,GAEvB,CACAC,qBACE,IACEX,KAAKY,SAAU,QACTZ,KAAKa,WACb,CACA,MAAOC,GACLC,QAAQC,MAAMhB,KAAKgB,OACnBhB,KAAKgB,OAASF,aAA6B,EAASA,EAAEG,WAAY,IAAAC,GAAG,uBAAwB,WAC/F,CACA,QACElB,KAAKY,SAAU,CACjB,CACF,CACAD,oBACE,IACEX,KAAKmB,MAAO,QACNnB,KAAKa,WACb,CACA,MAAOC,GACLC,QAAQC,MAAMhB,KAAKgB,OACnBhB,KAAKgB,OAASF,aAA6B,EAASA,EAAEG,WAAY,IAAAC,GAAG,uBAAwB,WAC/F,CACA,QACElB,KAAKmB,MAAO,CACd,CACF,CAEAR,kBACE,MAAMS,cAAwB,IAAAC,GAAS,CACrCC,MAAM,IAAAD,GAAa,sBAAuB,CACxCE,OAAQ,CAAC,aAAc,aACpBvB,KAAKC,QAEVuB,OAAO,IAOT,OALAxB,KAAKK,WAAa,CAChBC,MAAOmB,SAASL,EAASM,QAAQC,IAAI,eACrCpB,YAAakB,SAASL,EAASM,QAAQC,IAAI,qBAE7C3B,KAAKI,aAAgBgB,EAASQ,OACvB5B,KAAKI,MACd,CACAyB,WACE7B,KAAKC,MAAMC,KAAOF,KAAKC,MAAMC,KAAO,EACpCF,KAAK8B,aACP,CACAC,WACE/B,KAAKC,MAAMC,KAAOF,KAAKC,MAAMC,KAAO,EACpCF,KAAK8B,aACP,CACAE,kBAAkBC,GAChB,MAAM,OAAEC,EAAM,OAAEC,GAAWF,EAC3B,GAAIE,GAA4B,iBAAXA,EAAqB,CACxC,GAAIA,aAAuC,EAASA,EAAOC,eACzD,OAAO,IAAAC,GAAE,SAAU,CAAEC,KAAM,WAAY,IAAApB,GAAG,WAAY,aAExD,GAAIiB,aAAuC,EAASA,EAAOI,gBACzD,OAAO,IAAAF,GAAE,SAAU,CAAEC,KAAM,SAAU,IAAApB,GAAG,qBAAsB,YAElE,CACA,OAAO,IAAAmB,GAAE,wBAAyB,CAAEH,OAAQA,GAC9C,CACAM,gBACE,OAAQ,IAAAH,GAAE,UAAW,CAAEI,WAAW,IAAQ,IAAAJ,GAAE,kBAAmB,MAAM,IAAAA,GAAE,sBAAuB,CAAEK,MAAO,CAAE,YAAa,KAAO,cAAe,KAAO,IAAIC,MAAM,IAAIC,KAAI,KAAO,IAAAP,GAAE,cAAe,CAAEK,MAAO,CAAEG,MAAO,QAASC,QAAS,sBACnO,CACAC,cACE,OAAQ,IAAAV,GAAE,MAAO,MAAM,IAAAA,GAAE,aAAc,CAAEK,MAAO,CAAE,YAAa,QAAU,IAAAL,GAAE,OAAQ,CAAEW,KAAM,UAAW,IAAAX,GAAE,WAAY,CAAEY,KAAM,iBAAkB,IAAA/B,GAAG,6BAA8B,cACjL,CACAgC,aACE,OAAOlD,KAAKI,OAAOwC,KAAIX,IACrB,IAAIkB,EAAIC,EACR,MAAM,WAAEC,EAAU,aAAEC,EAAY,SAAEC,EAAQ,OAAEpB,EAAM,WAAEqB,EAAU,IAAEC,GAAQxB,EACxE,OAAQ,IAAAI,GAAE,sBAAuB,CAAEqB,KAAMD,EAAKf,MAAO,CAAE,YAAa,KAAO,cAAe,MAAO,IAAAL,GAAE,MAAO,KAAwB,iBAAXF,IAAwB,IAAAE,GAAE,iBAAkB,CAAEsB,MAAO,cAAeC,KAA4F,MAApFzB,aAAuC,EAASA,EAAOqB,aAAeA,GAAoBK,MAAO,QAASC,IAAK,UAAWC,KAAM,cAAgB,IAAA1B,GAAE,MAAO,MAAM,IAAAA,GAAE,UAAW,CAAE2B,UAAU,EAAMtB,MAAO,CACpY,UAAW,8BACR,IAAAuB,IAAQ,OAAG,UAAW,YAAsG,QAAxFd,EAAKE,aAA+C,EAASA,EAAWhD,kBAA+B,IAAP8C,OAAgB,EAASA,EAAGe,QAAU,EAAG,aAAuG,QAAxFd,EAAKC,aAA+C,EAASA,EAAWhD,kBAA+B,IAAP+C,OAAgB,EAASA,EAAGc,QAAU,MAAM,IAAA7B,GAAE,MAAO,KAAMrC,KAAKgC,kBAAkBC,KAAS,IAAAI,GAAE,MAAO,MAAM,IAAAA,GAAE,mBAAoB,CAAEC,KAAM,WAAYiB,SAAUA,EAAUY,MAAOb,KAAkB,GAExe,CACAc,gBACE,IAAIjB,EACJ,OAAInD,KAAKY,QACAZ,KAAKwC,gBAE8D,KAAhD,QAAtBW,EAAKnD,KAAKI,cAA2B,IAAP+C,OAAgB,EAASA,EAAGkB,QACvDrE,KAAK+C,eAEN,IAAAV,GAAE,UAAW,CAAE,cAAc,IAAQ,IAAAA,GAAE,kBAAmB,KAAMrC,KAAKkD,cAC/E,CACAoB,SACE,IAAInB,EAAIC,EACR,OAAQ,IAAAf,GAAE,sBAAuB,CAAEsB,MAAO,cAAe3C,MAAOhB,KAAKgB,QAAS,IAAAqB,GAAE,OAAQ,CAAEkC,KAAM,YAAa,IAAAlC,GAAE,OAAQ,CAAEW,KAAM,WAAahD,KAAKwE,UAAW,IAAAtD,GAAG,gBAAiB,gBAAiBlB,KAAKyE,YAAqC,QAAtBtB,EAAKnD,KAAKI,cAA2B,IAAP+C,OAAgB,EAASA,EAAGkB,UAAY,IAAAhC,GAAE,YAAa,CAAEC,KAAM,OAAQoB,KAAM1D,KAAKyE,QAASF,KAAM,QAAS,IAAArD,GAAG,WAAY,aAAa,IAAAmB,GAAE,UAAW,CAAEW,KAAM,gBAAiBuB,KAAM,YAAevE,KAAKoE,iBAAkBpE,KAAKyE,UAAY,IAAApC,GAAE,gBAAiB,CAAEnC,KAAMF,KAAKC,MAAMC,KAAMwE,QAAS1E,KAAKC,MAAME,SAAUG,MAAON,KAAKK,WAAWC,MAAOqE,WAAY3E,KAAKK,WAAWE,YAAaqE,aAAiF,QAAlExB,EAAKpD,gBAAmC,EAASA,KAAKI,cAA2B,IAAPgD,OAAgB,EAASA,EAAGiB,OAAQQ,aAAc,IAAM7E,KAAK6B,WAAYiD,aAAc,IAAM9E,KAAK+B,aAAgB/B,KAAKmB,OAAQ,IAAAkB,GAAE,cAAe,MACx1B,CACInD,SAAO,OAAO,IAAA6F,GAAW/E,KAAO,GAEtCJ,EAAa8C,MAnHW,m3B","sources":["webpack://sureforms/./node_modules/@surecart/components-react/node_modules/@surecart/components/dist/esm/lazy-64c2bf3b.js","webpack://sureforms/./node_modules/@surecart/components-react/node_modules/@surecart/components/dist/esm/sc-orders-list.entry.js"],"sourcesContent":["/** Do something the first time the element is visible */\nconst onFirstVisible = (el, callback) => {\n  const intersectionObserver = new window.IntersectionObserver((entries, observer) => {\n    if (entries[0].intersectionRatio > 0) {\n      callback();\n      observer.unobserve(entries[0].target);\n    }\n  });\n  intersectionObserver.observe(el);\n};\n\nexport { onFirstVisible as o };\n","import { r as registerInstance, h, g as getElement } from './index-430bb51b.js';\nimport { _ as __, s as sprintf, a as _n } from './default-i18n-c67eee5a.js';\nimport { a as apiFetch } from './fetch-d56a3ec0.js';\nimport { o as onFirstVisible } from './lazy-64c2bf3b.js';\nimport { a as addQueryArgs } from './add-query-args-f4c5962b.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scOrdersListCss = \":host{display:block}.orders-list{display:grid;gap:0.75em}.orders-list__heading{display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between}.orders-list__title{font-size:var(--sc-font-size-x-large);font-weight:var(--sc-font-weight-bold);line-height:var(--sc-line-height-dense)}.orders-list a{text-decoration:none;font-weight:var(--sc-font-weight-semibold);display:inline-flex;align-items:center;gap:0.25em;color:var(--sc-color-primary-500)}.order__row{color:var(--sc-color-gray-800);text-decoration:none;display:grid;align-items:center;justify-content:space-between;gap:0;grid-template-columns:1fr 1fr 1fr auto;margin:0;padding:var(--sc-spacing-small) var(--sc-spacing-large)}.order__row:not(:last-child){border-bottom:1px solid var(--sc-color-gray-200)}.order__row:hover{background:var(--sc-color-gray-50)}.order__date{font-weight:var(--sc-font-weight-semibold)}\";\n\nconst ScOrdersList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /** Query to fetch orders */\n    this.query = {\n      page: 1,\n      per_page: 10,\n    };\n    this.orders = [];\n    this.pagination = {\n      total: 0,\n      total_pages: 0,\n    };\n  }\n  /** Only fetch if visible */\n  componentWillLoad() {\n    onFirstVisible(this.el, () => {\n      this.initialFetch();\n    });\n  }\n  async initialFetch() {\n    try {\n      this.loading = true;\n      await this.getOrders();\n    }\n    catch (e) {\n      console.error(this.error);\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.loading = false;\n    }\n  }\n  async fetchOrders() {\n    try {\n      this.busy = true;\n      await this.getOrders();\n    }\n    catch (e) {\n      console.error(this.error);\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.busy = false;\n    }\n  }\n  /** Get all orders */\n  async getOrders() {\n    const response = (await await apiFetch({\n      path: addQueryArgs(`surecart/v1/orders/`, {\n        expand: ['line_items', 'charge'],\n        ...this.query,\n      }),\n      parse: false,\n    }));\n    this.pagination = {\n      total: parseInt(response.headers.get('X-WP-Total')),\n      total_pages: parseInt(response.headers.get('X-WP-TotalPages')),\n    };\n    this.orders = (await response.json());\n    return this.orders;\n  }\n  nextPage() {\n    this.query.page = this.query.page + 1;\n    this.fetchOrders();\n  }\n  prevPage() {\n    this.query.page = this.query.page - 1;\n    this.fetchOrders();\n  }\n  renderStatusBadge(order) {\n    const { status, charge } = order;\n    if (charge && typeof charge === 'object') {\n      if (charge === null || charge === void 0 ? void 0 : charge.fully_refunded) {\n        return h(\"sc-tag\", { type: \"danger\" }, __('Refunded', 'surecart'));\n      }\n      if (charge === null || charge === void 0 ? void 0 : charge.refunded_amount) {\n        return h(\"sc-tag\", { type: \"info\" }, __('Partially Refunded', 'surecart'));\n      }\n    }\n    return h(\"sc-order-status-badge\", { status: status });\n  }\n  renderLoading() {\n    return (h(\"sc-card\", { noPadding: true }, h(\"sc-stacked-list\", null, h(\"sc-stacked-list-row\", { style: { '--columns': '4' }, \"mobile-size\": 500 }, [...Array(4)].map(() => (h(\"sc-skeleton\", { style: { width: '100px', display: 'inline-block' } })))))));\n  }\n  renderEmpty() {\n    return (h(\"div\", null, h(\"sc-divider\", { style: { '--spacing': '0' } }), h(\"slot\", { name: \"empty\" }, h(\"sc-empty\", { icon: \"shopping-bag\" }, __(\"You don't have any orders.\", 'surecart')))));\n  }\n  renderList() {\n    return this.orders.map(order => {\n      var _a, _b;\n      const { line_items, total_amount, currency, charge, created_at, url } = order;\n      return (h(\"sc-stacked-list-row\", { href: url, style: { '--columns': '4' }, \"mobile-size\": 500 }, h(\"div\", null, typeof charge !== 'string' && (h(\"sc-format-date\", { class: \"order__date\", date: ((charge === null || charge === void 0 ? void 0 : charge.created_at) || created_at) * 1000, month: \"short\", day: \"numeric\", year: \"numeric\" }))), h(\"div\", null, h(\"sc-text\", { truncate: true, style: {\n          '--color': 'var(--sc-color-gray-500)',\n        } }, sprintf(_n('%s item', '%s items', ((_a = line_items === null || line_items === void 0 ? void 0 : line_items.pagination) === null || _a === void 0 ? void 0 : _a.count) || 0, 'surecart'), ((_b = line_items === null || line_items === void 0 ? void 0 : line_items.pagination) === null || _b === void 0 ? void 0 : _b.count) || 0))), h(\"div\", null, this.renderStatusBadge(order)), h(\"div\", null, h(\"sc-format-number\", { type: \"currency\", currency: currency, value: total_amount }))));\n    });\n  }\n  renderContent() {\n    var _a;\n    if (this.loading) {\n      return this.renderLoading();\n    }\n    if (((_a = this.orders) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n      return this.renderEmpty();\n    }\n    return (h(\"sc-card\", { \"no-padding\": true }, h(\"sc-stacked-list\", null, this.renderList())));\n  }\n  render() {\n    var _a, _b;\n    return (h(\"sc-dashboard-module\", { class: \"orders-list\", error: this.error }, h(\"span\", { slot: \"heading\" }, h(\"slot\", { name: \"heading\" }, this.heading || __('Order History', 'surecart'))), !!this.allLink && !!((_a = this.orders) === null || _a === void 0 ? void 0 : _a.length) && (h(\"sc-button\", { type: \"link\", href: this.allLink, slot: \"end\" }, __('View all', 'surecart'), h(\"sc-icon\", { name: \"chevron-right\", slot: \"suffix\" }))), this.renderContent(), !this.allLink && (h(\"sc-pagination\", { page: this.query.page, perPage: this.query.per_page, total: this.pagination.total, totalPages: this.pagination.total_pages, totalShowing: (_b = this === null || this === void 0 ? void 0 : this.orders) === null || _b === void 0 ? void 0 : _b.length, onScNextPage: () => this.nextPage(), onScPrevPage: () => this.prevPage() })), this.busy && h(\"sc-block-ui\", null)));\n  }\n  get el() { return getElement(this); }\n};\nScOrdersList.style = scOrdersListCss;\n\nexport { ScOrdersList as sc_orders_list };\n"],"names":["onFirstVisible","el","callback","window","IntersectionObserver","entries","observer","intersectionRatio","unobserve","target","observe","ScOrdersList","constructor","hostRef","r","this","query","page","per_page","orders","pagination","total","total_pages","componentWillLoad","o","initialFetch","async","loading","getOrders","e","console","error","message","_","busy","response","a","path","expand","parse","parseInt","headers","get","json","nextPage","fetchOrders","prevPage","renderStatusBadge","order","status","charge","fully_refunded","h","type","refunded_amount","renderLoading","noPadding","style","Array","map","width","display","renderEmpty","name","icon","renderList","_a","_b","line_items","total_amount","currency","created_at","url","href","class","date","month","day","year","truncate","s","count","value","renderContent","length","render","slot","heading","allLink","perPage","totalPages","totalShowing","onScNextPage","onScPrevPage","g"],"sourceRoot":""}