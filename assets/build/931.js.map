{"version":3,"file":"931.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components-react/node_modules/@surecart/components/dist/esm/sc-checkout.entry.js","webpack://sureforms/./node_modules/@surecart/components-react/node_modules/@surecart/components/dist/esm/universe-d405bbd3.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, g as getElement } from './index-430bb51b.js';\nimport { _ as __ } from './default-i18n-c67eee5a.js';\nimport { U as Universe } from './universe-d405bbd3.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scCheckoutCss = \"sc-checkout{display:block;font-family:var(--sc-font-sans);font-size:var(--sc-checkout-font-size, 16px);position:relative}sc-checkout h3{font-size:var(--sc-input-label-font-size-medium)}sc-alert{margin-bottom:var(--sc-form-row-spacing)}.sc-checkout-container.sc-align-center{max-width:500px;margin-left:auto;margin-right:auto}.sc-checkout-container.sc-align-wide{max-width:800px;margin-left:auto;margin-right:auto}::slotted(*){font-family:var(--sc-font-sans)}\";\n\nconst ScCheckout = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.scOrderUpdated = createEvent(this, \"scOrderUpdated\", 7);\n    this.scOrderFinalized = createEvent(this, \"scOrderFinalized\", 7);\n    this.scOrderError = createEvent(this, \"scOrderError\", 7);\n    /** An array of prices to pre-fill in the form. */\n    this.prices = [];\n    /** Are we in test or live mode. */\n    this.mode = 'live';\n    /** Currency to use for this checkout. */\n    this.currencyCode = 'usd';\n    /** Whether to persist the session in the browser between visits. */\n    this.persistSession = true;\n    /** Where to go on success */\n    this.successUrl = '';\n    /** Can we edit line items? */\n    this.editLineItems = true;\n    /** Can we remove line items? */\n    this.removeLineItems = true;\n    /** Use the Stripe payment element. */\n    this.stripePaymentElement = false;\n    /** Stores fetched prices for use throughout component.  */\n    this.pricesEntities = {};\n    /** Stores fetched products for use throughout component.  */\n    this.productsEntities = {};\n    /** Loading states for different parts of the form. */\n    this.checkoutState = 'idle';\n    /** The currenly selected processor */\n    this.processor = 'stripe';\n    /** Holds the payment intents for the checkout. */\n    this.paymentIntents = {};\n  }\n  handleSetPaymentIntent(e) {\n    var _a, _b;\n    const paymentIntent = (_a = e.detail) === null || _a === void 0 ? void 0 : _a.payment_intent;\n    const processor = (_b = e.detail) === null || _b === void 0 ? void 0 : _b.processor;\n    this.paymentIntents[processor] = paymentIntent;\n  }\n  handleProcessorChange(e) {\n    this.processor = e.detail;\n  }\n  handleAddEntities(e) {\n    const { products, prices } = e.detail;\n    // add products.\n    if (Object.keys((products === null || products === void 0 ? void 0 : products.length) || {})) {\n      this.productsEntities = {\n        ...this.productsEntities,\n        ...products,\n      };\n    }\n    // add prices.\n    if (Object.keys((prices === null || prices === void 0 ? void 0 : prices.length) || {})) {\n      this.pricesEntities = {\n        ...this.pricesEntities,\n        ...prices,\n      };\n    }\n  }\n  /**\n   * Submit the form\n   */\n  async submit({ skip_validation } = { skip_validation: false }) {\n    if (!skip_validation) {\n      await this.validate();\n    }\n    return await this.sessionProvider.finalize();\n  }\n  /**\n   * Validate the form.\n   */\n  async validate() {\n    const form = this.el.querySelector('sc-form');\n    return await form.validate();\n  }\n  componentWillLoad() {\n    // @ts-ignore\n    Universe.create(this, this.state());\n  }\n  componentDidLoad() {\n    this.isDuplicate = document.querySelector('sc-checkout') !== this.el;\n  }\n  state() {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n    return {\n      processor: this.processor,\n      processors: this.processors,\n      processor_data: (_a = this.order) === null || _a === void 0 ? void 0 : _a.processor_data,\n      state: this.checkoutState,\n      paymentIntents: this.paymentIntents,\n      successUrl: this.successUrl,\n      order: this.order,\n      shippingEnabled: (_b = this.order) === null || _b === void 0 ? void 0 : _b.shipping_enabled,\n      lineItems: ((_d = (_c = this.order) === null || _c === void 0 ? void 0 : _c.line_items) === null || _d === void 0 ? void 0 : _d.data) || [],\n      editLineItems: this.editLineItems,\n      removeLineItems: this.removeLineItems,\n      // checkout states\n      loading: this.checkoutState === 'loading',\n      busy: ['updating', 'finalizing', 'paid', 'confirmed'].includes(this.checkoutState),\n      paying: ['finalizing', 'paid', 'confirmed'].includes(this.checkoutState),\n      empty: !['loading', 'updating'].includes(this.checkoutState) && !((_g = (_f = (_e = this.order) === null || _e === void 0 ? void 0 : _e.line_items) === null || _f === void 0 ? void 0 : _f.pagination) === null || _g === void 0 ? void 0 : _g.count),\n      // checkout states\n      // stripe.\n      stripePaymentElement: this.stripePaymentElement,\n      error: this.error,\n      customer: this.customer,\n      tax_status: (_h = this === null || this === void 0 ? void 0 : this.order) === null || _h === void 0 ? void 0 : _h.tax_status,\n      customerShippingAddress: typeof ((_j = this.order) === null || _j === void 0 ? void 0 : _j.customer) !== 'string' ? (_l = (_k = this === null || this === void 0 ? void 0 : this.order) === null || _k === void 0 ? void 0 : _k.customer) === null || _l === void 0 ? void 0 : _l.shipping_address : {},\n      shippingAddress: (_m = this.order) === null || _m === void 0 ? void 0 : _m.shipping_address,\n      taxStatus: (_o = this.order) === null || _o === void 0 ? void 0 : _o.tax_status,\n      taxIdentifier: (_p = this.order) === null || _p === void 0 ? void 0 : _p.tax_identifier,\n      lockedChoices: this.prices,\n      products: this.productsEntities,\n      prices: this.pricesEntities,\n      country: 'US',\n      loggedIn: this.loggedIn,\n      formId: this.formId,\n      mode: this.mode,\n      currencyCode: this.currencyCode,\n    };\n  }\n  render() {\n    if (this.isDuplicate) {\n      return h(\"sc-alert\", { open: true }, __('Due to processor restrictions, only one checkout form is allowed on the page.', 'surecart'));\n    }\n    return (h(\"div\", { class: {\n        'sc-checkout-container': true,\n        'sc-align-center': this.alignment === 'center',\n        'sc-align-wide': this.alignment === 'wide',\n        'sc-align-full': this.alignment === 'full',\n      } }, h(Universe.Provider, { state: this.state() }, h(\"sc-form-state-provider\", { onScSetCheckoutFormState: e => (this.checkoutState = e.detail) }, h(\"sc-form-error-provider\", { order: this.order, onScUpdateError: e => (this.error = e.detail) }, h(\"sc-form-components-validator\", { order: this.order, disabled: this.disableComponentsValidation, taxEnabled: this.taxEnabled }, h(\"sc-session-provider\", { ref: el => (this.sessionProvider = el), order: this.order, prices: this.prices, stripePaymentElement: this.stripePaymentElement, paymentIntents: this.paymentIntents, persist: this.persistSession, modified: this.modified, mode: this.mode, \"form-id\": this.formId, \"group-id\": this.el.id, processor: this.processor, \"currency-code\": this.currencyCode, onScUpdateOrderState: e => (this.order = e.detail), onScError: e => (this.error = e.detail) }, h(\"sc-order-redirect-provider\", { order: this.order, \"success-url\": this.successUrl }, h(\"sc-order-confirm-provider\", { order: this.order }, h(\"slot\", null))))))), this.state().busy && h(\"sc-block-ui\", { \"z-index\": 9 }))));\n  }\n  get el() { return getElement(this); }\n};\nScCheckout.style = scCheckoutCss;\n\nexport { ScCheckout as sc_checkout };\n","import { g as getElement, a as getRenderingRef } from './index-430bb51b.js';\n\nvar multiverse = new Map();\nvar updateConsumer = function (_a, state) {\n    var fields = _a.fields, updater = _a.updater;\n    fields.forEach(function (field) { updater(field, state[field]); });\n};\nvar Universe = {\n    create: function (creator, initialState) {\n        var el = getElement(creator);\n        var wormholes = new Map();\n        var universe = { wormholes: wormholes, state: initialState };\n        multiverse.set(creator, universe);\n        var connectedCallback = creator.connectedCallback;\n        creator.connectedCallback = function () {\n            multiverse.set(creator, universe);\n            if (connectedCallback) {\n                connectedCallback.call(creator);\n            }\n        };\n        var disconnectedCallback = creator.disconnectedCallback;\n        creator.disconnectedCallback = function () {\n            multiverse.delete(creator);\n            if (disconnectedCallback) {\n                disconnectedCallback.call(creator);\n            }\n        };\n        el.addEventListener('openWormhole', function (event) {\n            event.stopPropagation();\n            var _a = event.detail, consumer = _a.consumer, onOpen = _a.onOpen;\n            if (wormholes.has(consumer))\n                return;\n            if (typeof consumer !== 'symbol') {\n                var connectedCallback_1 = consumer.connectedCallback, disconnectedCallback_1 = consumer.disconnectedCallback;\n                consumer.connectedCallback = function () {\n                    wormholes.set(consumer, event.detail);\n                    if (connectedCallback_1) {\n                        connectedCallback_1.call(consumer);\n                    }\n                };\n                consumer.disconnectedCallback = function () {\n                    wormholes.delete(consumer);\n                    if (disconnectedCallback_1) {\n                        disconnectedCallback_1.call(consumer);\n                    }\n                };\n            }\n            wormholes.set(consumer, event.detail);\n            updateConsumer(event.detail, universe.state);\n            onOpen === null || onOpen === void 0 ? void 0 : onOpen.resolve(function () { wormholes.delete(consumer); });\n        });\n        el.addEventListener('closeWormhole', function (event) {\n            var consumer = event.detail;\n            wormholes.delete(consumer);\n        });\n    },\n    Provider: function (_a, children) {\n        var state = _a.state;\n        var creator = getRenderingRef();\n        if (multiverse.has(creator)) {\n            var universe = multiverse.get(creator);\n            universe.state = state;\n            universe.wormholes.forEach(function (opening) { updateConsumer(opening, state); });\n        }\n        return children;\n    }\n};\n\nexport { Universe as U };\n"],"names":["ScCheckout","constructor","hostRef","r","this","scOrderUpdated","c","scOrderFinalized","scOrderError","prices","mode","currencyCode","persistSession","successUrl","editLineItems","removeLineItems","stripePaymentElement","pricesEntities","productsEntities","checkoutState","processor","paymentIntents","handleSetPaymentIntent","e","_a","_b","paymentIntent","detail","payment_intent","handleProcessorChange","handleAddEntities","products","Object","keys","length","async","skip_validation","validate","sessionProvider","finalize","form","el","querySelector","componentWillLoad","U","state","componentDidLoad","isDuplicate","document","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","processors","processor_data","order","shippingEnabled","shipping_enabled","lineItems","line_items","data","loading","busy","includes","paying","empty","pagination","count","error","customer","tax_status","customerShippingAddress","shipping_address","shippingAddress","taxStatus","taxIdentifier","tax_identifier","lockedChoices","country","loggedIn","formId","render","h","open","_","class","alignment","onScSetCheckoutFormState","onScUpdateError","disabled","disableComponentsValidation","taxEnabled","ref","persist","modified","id","onScUpdateOrderState","onScError","g","style","multiverse","Map","updateConsumer","fields","updater","forEach","field","Universe","create","creator","initialState","wormholes","universe","set","connectedCallback","call","disconnectedCallback","delete","addEventListener","event","stopPropagation","consumer","onOpen","has","connectedCallback_1","disconnectedCallback_1","resolve","Provider","children","get","opening"],"sourceRoot":""}