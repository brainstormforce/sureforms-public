"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[6405],{6405:function(e,t,n){n.r(t),n.d(t,{sc_order_confirmation:function(){return d}});var i=n(6046),o=n(712),r=n(290),s=n(7244),a=n(8517);n(5115);const d=class{constructor(e){(0,i.r)(this,e),this.loading=!1}componentWillLoad(){s.U.create(this,this.state()),this.getSession()}getSessionId(){var e;return(null===(e=this.order)||void 0===e?void 0:e.id)?this.order.id:(0,o.g)(window.location.href,"order")}async getSession(){var e;if(this.getSessionId()&&!(null===(e=this.order)||void 0===e?void 0:e.id))try{this.loading=!0,this.order=await await(0,o.a)({path:(0,a.a)(`surecart/v1/orders/${this.getSessionId()}`,{expand:["line_items","line_item.price","price.product","customer","customer.shipping_address","payment_intent","discount","discount.promotion","billing_address","shipping_address"],refresh_status:!0})})}catch(e){(null==e?void 0:e.message)?this.error=e.message:this.error=(0,r._)("Something went wrong","surecart")}finally{this.loading=!1}}state(){var e;return{processor:"stripe",loading:this.loading,orderId:this.getSessionId(),order:this.order,customer:null===(e=this.order)||void 0===e?void 0:e.customer}}render(){var e,t;return(0,i.h)(s.U.Provider,{state:this.state()},(0,i.h)("div",{class:{"order-confirmation":!0}},(0,i.h)("div",{class:{"order-confirmation__content":!0,hidden:!(null===(e=this.order)||void 0===e?void 0:e.id)&&!this.loading}},(0,i.h)("slot",null)),!(null===(t=this.order)||void 0===t?void 0:t.id)&&!this.loading&&(0,i.h)("sc-heading",null,(0,r._)("Order not found.","surecart"),(0,i.h)("span",{slot:"description"},(0,r._)("This order could not be found. Please try again.","surecart")))))}};d.style=":host{display:block;max-width:800px;margin:auto}.order-confirmation__content{display:grid;gap:var(--sc-form-row-spacing-large)}.order-confirmation__content.hidden{display:none}::part(line-items){display:grid;gap:0.5em}"},7244:function(e,t,n){n.d(t,{U:function(){return s}});var i=n(6046),o=new Map,r=function(e,t){var n=e.fields,i=e.updater;n.forEach((function(e){i(e,t[e])}))},s={create:function(e,t){var n=(0,i.g)(e),s=new Map,a={wormholes:s,state:t};o.set(e,a);var d=e.connectedCallback;e.connectedCallback=function(){o.set(e,a),d&&d.call(e)};var c=e.disconnectedCallback;e.disconnectedCallback=function(){o.delete(e),c&&c.call(e)},n.addEventListener("openWormhole",(function(e){e.stopPropagation();var t=e.detail,n=t.consumer,i=t.onOpen;if(!s.has(n)){if("symbol"!=typeof n){var o=n.connectedCallback,d=n.disconnectedCallback;n.connectedCallback=function(){s.set(n,e.detail),o&&o.call(n)},n.disconnectedCallback=function(){s.delete(n),d&&d.call(n)}}s.set(n,e.detail),r(e.detail,a.state),null==i||i.resolve((function(){s.delete(n)}))}})),n.addEventListener("closeWormhole",(function(e){var t=e.detail;s.delete(t)}))},Provider:function(e,t){var n=e.state,s=(0,i.a)();if(o.has(s)){var a=o.get(s);a.state=n,a.wormholes.forEach((function(e){r(e,n)}))}return t}}}}]);