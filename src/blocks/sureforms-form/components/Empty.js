/** @jsx jsx */
/* eslint-disable react/no-unknown-property */
import { jsx } from '@emotion/react';

/**
 * WordPress dependencies
 */
import { useBlockProps } from '@wordpress/block-editor';
import { Placeholder, Button } from '@wordpress/components';
import { useState } from '@wordpress/element';
import { __ } from '@wordpress/i18n';

/**
 * Components
 */
import SelectForm from './SelectForm';

export default ( { setAttributes } ) => {
	const [ form, setForm ] = useState( {} );
	const [ formId, setFormId ] = useState();
	const [ value, setValue ] = useState( '' );

	return (
		<div { ...useBlockProps() }>
			<Placeholder
				icon={
					<svg
						width="192"
						height="32"
						viewBox="0 0 192 32"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
						data-type="sureforms-logo"
					>
						<g clip-path="url(#clip0_15648_39510)">
							<rect width="32" height="32" fill="#D54407" />
							<path
								d="M9.14307 6.85645H22.8574V11.4279H11.4288L9.14307 13.7136V11.4279V6.85645Z"
								fill="white"
							/>
							<path
								d="M9.14307 6.85645H22.8574V11.4279H11.4288L9.14307 13.7136V11.4279V6.85645Z"
								fill="white"
							/>
							<path
								d="M9.14307 13.7139H20.5716V18.2853H11.4288L9.14307 20.571V18.2853V13.7139Z"
								fill="white"
							/>
							<path
								d="M9.14307 13.7139H20.5716V18.2853H11.4288L9.14307 20.571V18.2853V13.7139Z"
								fill="white"
							/>
							<path
								d="M9.14307 20.5713H16.0002V25.1427H9.14307V20.5713Z"
								fill="white"
							/>
							<path
								d="M9.14307 20.5713H16.0002V25.1427H9.14307V20.5713Z"
								fill="white"
							/>
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M42.6665 22.1379L43.9899 20.193C44.5972 20.8939 45.4051 21.4837 46.4133 21.9626C47.4216 22.4415 48.4815 22.6809 49.5931 22.6809C50.8649 22.6809 51.8561 22.4065 52.5664 21.8575C53.2883 21.3085 53.6493 20.5902 53.6493 19.7024C53.6493 19.1418 53.4545 18.6687 53.0649 18.2833C52.6753 17.8978 52.1711 17.5999 51.5524 17.3897C50.9336 17.1795 50.2518 16.9867 49.5071 16.8116C48.7623 16.6363 48.0118 16.4319 47.2556 16.1983C46.5108 15.9647 45.829 15.6785 45.2103 15.3398C44.5915 15.001 44.0873 14.5221 43.6977 13.9031C43.3081 13.2723 43.1134 12.5248 43.1134 11.6604C43.1134 10.2353 43.6748 9.04982 44.7978 8.1037C45.9207 7.14589 47.4618 6.66699 49.4212 6.66699C52.0107 6.66699 54.1076 7.50799 55.7117 9.18998L54.4915 11.0472C53.9643 10.3931 53.2539 9.86746 52.3602 9.47031C51.4779 9.0615 50.4982 8.85709 49.4212 8.85709C48.2868 8.85709 47.3758 9.1199 46.6883 9.64552C46.0009 10.1595 45.6571 10.8077 45.6571 11.5903C45.6571 12.0926 45.8519 12.5189 46.2415 12.8694C46.631 13.2081 47.1295 13.4767 47.7368 13.6753C48.3555 13.8622 49.0373 14.0432 49.7821 14.2185C50.5383 14.382 51.2888 14.5864 52.0336 14.8317C52.7899 15.077 53.4716 15.3806 54.0789 15.7428C54.6977 16.0931 55.2019 16.6013 55.5914 17.2671C55.981 17.9328 56.1758 18.7213 56.1758 19.6324C56.1758 21.1508 55.5914 22.4065 54.4227 23.3993C53.2654 24.3805 51.6326 24.8711 49.5243 24.8711C46.6712 24.8711 44.3853 23.96 42.6665 22.1379ZM59.0646 19.3345V7.10501H61.6944V18.511C61.6944 19.9594 62.0209 20.9815 62.674 21.5771C63.3272 22.1612 64.2782 22.4532 65.5271 22.4532C66.5126 22.4532 67.4636 22.202 68.3802 21.6998C69.2968 21.1975 70.013 20.5785 70.5286 19.8426V7.10501H73.1755V24.4331H70.5286V21.9977C69.8182 22.8153 68.9302 23.4986 67.8646 24.0476C66.799 24.5965 65.6704 24.8711 64.4786 24.8711C60.8693 24.8711 59.0646 23.0255 59.0646 19.3345ZM77.044 24.4331H79.6737V12.1685C80.0633 11.456 80.7336 10.8194 81.6847 10.2588C82.6357 9.6864 83.518 9.40023 84.3315 9.40023C84.595 9.40023 84.9331 9.42359 85.3455 9.47031V6.70204C84.2456 6.70204 83.2086 6.99405 82.2347 7.57807C81.2606 8.15042 80.4071 8.91549 79.6737 9.8733V7.10501H77.044V24.4331ZM86.2578 15.7428C86.2578 14.0841 86.613 12.5657 87.3235 11.1874C88.0454 9.79737 89.048 8.6994 90.3313 7.89345C91.6146 7.07581 93.0526 6.66699 94.6453 6.66699C96.3182 6.66699 97.7791 7.08165 99.0281 7.91097C100.277 8.74028 101.217 9.85577 101.847 11.2574C102.488 12.6474 102.809 14.2184 102.809 15.9705V16.6538H89.0766C89.1797 18.3592 89.7755 19.7842 90.8641 20.9289C91.9641 22.0736 93.3963 22.6459 95.1609 22.6459C96.1578 22.6459 97.1146 22.4532 98.0312 22.0677C98.9594 21.6823 99.7671 21.1334 100.455 20.4208L101.709 22.1729C99.9104 23.9716 97.6589 24.8711 94.9547 24.8711C92.4109 24.8711 90.3256 24.0242 88.6985 22.3306C87.0714 20.6369 86.2578 18.441 86.2578 15.7428ZM89.0422 14.639H100.197C100.186 13.9732 100.065 13.3132 99.8359 12.6591C99.6182 12.005 99.2917 11.3917 98.8563 10.8194C98.4208 10.2471 97.8364 9.78569 97.1031 9.43528C96.3698 9.07318 95.539 8.89213 94.6109 8.89213C93.7401 8.89213 92.9495 9.06733 92.2391 9.41775C91.5287 9.76816 90.95 10.2296 90.5031 10.8019C90.0677 11.3626 89.724 11.9758 89.4719 12.6415C89.2198 13.2957 89.0766 13.9615 89.0422 14.639Z"
								fill="#030712"
							/>
							<path
								d="M109.172 25.0171H105.493V7.42401H117.722V10.7211H109.172V14.4138H117.54V17.7109H109.172V25.0171Z"
								fill="#030712"
							/>
							<path
								d="M128.507 25.3337C123.274 25.3337 119.465 21.5354 119.465 16.2338C119.465 10.9321 123.274 7.13387 128.507 7.13387C133.714 7.13387 137.523 10.9321 137.523 16.2338C137.523 21.5354 133.714 25.3337 128.507 25.3337ZM128.507 22.0102C131.694 22.0102 133.74 19.5045 133.74 16.2338C133.74 12.9367 131.694 10.4573 128.507 10.4573C125.294 10.4573 123.248 12.9367 123.248 16.2338C123.248 19.5045 125.294 22.0102 128.507 22.0102Z"
								fill="#030712"
							/>
							<path
								d="M154.121 25.0171H149.872L146.478 18.7659H143.784V25.0171H140.105V7.42401H148.188C151.789 7.42401 154.017 9.82428 154.017 13.095C154.017 16.181 152.074 17.8691 150.209 18.3175L154.121 25.0171ZM147.67 15.4688C149.121 15.4688 150.235 14.572 150.235 13.0686C150.235 11.6179 149.121 10.7211 147.67 10.7211H143.784V15.4688H147.67Z"
								fill="#030712"
							/>
							<path
								d="M175.484 25.0171H171.779V12.33L166.909 25.0171H165.302L160.432 12.33V25.0171H156.753V7.42401H161.908L166.105 18.423L170.303 7.42401H175.484V25.0171Z"
								fill="#030712"
							/>
							<path
								d="M185.082 25.3337C181.74 25.3337 179.357 24.1995 177.724 22.5377L179.745 19.61C180.963 20.9024 182.854 22.0102 185.238 22.0102C187.285 22.0102 188.243 21.087 188.243 20.0584C188.243 16.9987 178.294 19.1352 178.294 12.5147C178.294 9.58689 180.782 7.16025 184.849 7.16025C187.595 7.16025 189.875 8.0043 191.585 9.61326L189.539 12.4092C188.14 11.0903 186.274 10.4837 184.512 10.4837C182.958 10.4837 182.077 11.1695 182.077 12.2245C182.077 14.9941 192 13.1213 192 19.6891C192 22.907 189.72 25.3337 185.082 25.3337Z"
								fill="#030712"
							/>
						</g>
						<defs>
							<clipPath id="clip0_15648_39510">
								<rect width="192" height="32" fill="white" />
							</clipPath>
						</defs>
					</svg>
				}
				className="srfm-select-form-placeholder"
			>
				<div className="srfm-select-form-container">
					<SelectForm
						form={ form }
						setForm={ setForm }
						setFormId={ setFormId }
						label="title"
						id="id"
						formId={ formId }
						selectedVal={ value }
						handleChange={ ( val ) => setValue( val ) }
					/>
					<div className="srfm-select-form-button">
						<Button
							variant="primary"
							text={ __( 'Choose', 'sureforms' ) }
							onClick={ () => {
								setAttributes( { id: formId } );
							} }
						/>
						<Button
							variant="secondary"
							text={ __( 'Create New', 'sureforms' ) }
							onClick={ () => {
								// open in a new tab
								window.open(
									srfm_block_data.template_picker_url
								);
							} }
						/>
					</div>
				</div>
			</Placeholder>
		</div>
	);
};
