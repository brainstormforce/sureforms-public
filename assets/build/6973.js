"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[6973],{7586:function(e,t,i){function s(e,t,i){return new Promise((s=>{if((null==i?void 0:i.duration)===1/0)throw new Error("Promise-based animations must be finite.");const o=e.animate(t,{...i,duration:window.matchMedia("(prefers-reduced-motion: reduce)").matches?0:i.duration});o.addEventListener("cancel",s,{once:!0}),o.addEventListener("finish",s,{once:!0})}))}function o(e){var t;return Promise.all(((null===(t=null==e?void 0:e.getAnimations)||void 0===t?void 0:t.call(e))||[]).map((e=>new Promise((t=>{const i=requestAnimationFrame(t);e.addEventListener("cancel",(()=>i),{once:!0}),e.addEventListener("finish",(()=>i),{once:!0}),e.cancel()})))))}function n(e,t){return e.map((e=>({...e,height:"auto"===e.height?`${t}px`:e.height})))}i.d(t,{a:function(){return s},b:function(){return l},c:function(){return n},g:function(){return d},s:function(){return o}});const r=new Map,a=new WeakMap;function l(e,t){r.set(e,function(e){return null!=e?e:{keyframes:[],options:{duration:0}}}(t))}function d(e,t){const i=a.get(e);if(null==i?void 0:i[t])return i[t];return r.get(t)||{keyframes:[],options:{duration:0}}}},7167:function(e,t,i){i.d(t,{g:function(){return s}});const s=(e=[],t,i)=>{var s;return null===(s=(e||[]).find((e=>(null==e?void 0:e.processor_type)===t&&(null==e?void 0:e.live_mode)===!("live"!==i))))||void 0===s?void 0:s.processor_data}},551:function(e,t,i){i.d(t,{p:function(){return o}});var s=(0,i(5115).c)((function(e,t){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0});var s,o="https://js.stripe.com/v3",n=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,r="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",a=null,l=function(e){return null!==a||(a=new Promise((function(t,i){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(r),window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o,'"]')),t=0;t<e.length;t++){var i=e[t];if(n.test(i.src))return i}return null}();s&&e?console.warn(r):s||(s=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",i=document.createElement("script");i.src="".concat(o).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(i),i}(e)),s.addEventListener("load",(function(){window.Stripe?t(window.Stripe):i(new Error("Stripe.js not available"))})),s.addEventListener("error",(function(){i(new Error("Failed to load Stripe.js"))}))}catch(e){return void i(e)}else t(null)}))),a},d=function(e,t,i){if(null===e)return null;var s=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.28.0",startTime:t})}(s,i),s},c=!1,h=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];c=!0;var o=Date.now();return l(s).then((function(e){return d(e,t,o)}))};h.setLoadParameters=function(e){if(c)throw new Error("You cannot change load parameters after calling loadStripe");s=function(e){var t="invalid load parameters; expected object of shape\n\n    {advancedFraudSignals: boolean}\n\nbut received\n\n    ".concat(JSON.stringify(e),"\n");if(null===e||"object"!==i(e))throw new Error(t);if(1===Object.keys(e).length&&"boolean"==typeof e.advancedFraudSignals)return e;throw new Error(t)}(e)},t.loadStripe=h})),o=s},6973:function(e,t,i){i.r(t),i.d(t,{sc_order_stripe_payment_element:function(){return d},sc_secure_notice:function(){return c},sc_stripe_element:function(){return h},sc_toggle:function(){return u},sc_toggles:function(){return p}});var s=i(6046),o=i(712),n=i(7167),r=i(551),a=i(7586);i(290),i(5115);const l=(e,t)=>{var i,s;return 0!==(null===(s=null===(i=null==t?void 0:t.line_items)||void 0===i?void 0:i.pagination)||void 0===s?void 0:s.count)&&(0===(null==e?void 0:e.amount)&&0!==(null==t?void 0:t.amount_due)||(null==e?void 0:e.amount)>0&&0===(null==t?void 0:t.amount_due))},d=class{constructor(e){(0,s.r)(this,e),this.scPaid=(0,s.c)(this,"scPaid",7),this.scPayError=(0,s.c)(this,"scPayError",7),this.scSetPaymentIntent=(0,s.c)(this,"scSetPaymentIntent",7),this.processors=[],this.mode="live",this.currencyCode="usd"}async componentDidLoad(){var e,t,i;this.paymentIntent=await(0,o.a)({method:"POST",path:"surecart/v1/payment_intents",data:{amount:"number"==typeof(null===(e=null==this?void 0:this.order)||void 0===e?void 0:e.amount_due)?this.order.amount_due:100,currency:this.currencyCode,processor_type:"stripe",live_mode:"live"===this.mode}}),this.clientSecret=null===(i=null===(t=this.paymentIntent.processor_data)||void 0===t?void 0:t.stripe)||void 0===i?void 0:i.client_secret}async updatePaymentIntent(){var e,t,i;(null===(e=this.paymentIntent)||void 0===e?void 0:e.id)&&(this.paymentIntent=await(0,o.a)({method:"PATCH",path:`surecart/v1/payment_intents/${this.paymentIntent.id}`,data:{amount:this.order.amount_due,currency:this.currencyCode,processor_type:"stripe",live_mode:"live"===this.mode}}),this.clientSecret=null===(i=null===(t=this.paymentIntent.processor_data)||void 0===t?void 0:t.stripe)||void 0===i?void 0:i.client_secret)}async handleOrderChange(){l(this.paymentIntent,this.order)&&(this.clientSecret=null,await this.updatePaymentIntent())}async handlePaymentIntentChange(){l(this.paymentIntent,this.order)&&await this.updatePaymentIntent(),this.scSetPaymentIntent.emit({processor:"stripe",payment_intent:this.paymentIntent})}render(){const e=(0,n.g)(this.processors,"stripe",this.mode);return(0,s.h)("sc-stripe-payment-element",{order:this.order,address:this.address,"client-secret":this.clientSecret,publishableKey:null==e?void 0:e.publishable_key,accountId:null==e?void 0:e.account_id,key:this.clientSecret})}static get watchers(){return{order:["handleOrderChange"],paymentIntent:["handlePaymentIntentChange"]}}};d.style=":host{display:block}.loader{display:grid;height:128px;gap:2em}.loader__row{display:flex;align-items:flex-start;justify-content:space-between;gap:1em}.loader__details{display:grid;gap:0.5em}";const c=class{constructor(e){(0,s.r)(this,e)}render(){return(0,s.h)("div",{class:"notice",part:"base"},(0,s.h)("svg",{class:"notice__icon",part:"icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 512 512",fill:"currentColor"},(0,s.h)("path",{d:"M368,192H352V112a96,96,0,1,0-192,0v80H144a64.07,64.07,0,0,0-64,64V432a64.07,64.07,0,0,0,64,64H368a64.07,64.07,0,0,0,64-64V256A64.07,64.07,0,0,0,368,192Zm-48,0H192V112a64,64,0,1,1,128,0Z"})),(0,s.h)("span",{class:"notice__text",part:"text"},(0,s.h)("slot",{name:"prefix"}),(0,s.h)("slot",null),(0,s.h)("slot",{name:"suffix"})))}};c.style=":host{display:block;--sc-secure-notice-icon-color:var(--sc-color-gray-300);--sc-secure-notice-font-size:var(--sc-font-size-small);--sc-secure-notice-color:var(--sc-color-gray-500)}.notice{color:var(--sc-secure-notice-color);font-size:var(--sc-secure-notice-font-size);display:flex;align-items:center}.notice__text{flex:1;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.notice__icon{color:var(--sc-secure-notice-icon-color);margin-right:5px}";const h=class{constructor(e){(0,s.r)(this,e),this.scPaid=(0,s.c)(this,"scPaid",7),this.scPayError=(0,s.c)(this,"scPayError",7),this.mode="live",this.size="medium",this.secureText="",this.showLabel=!0}async componentWillLoad(){this.publishableKey&&this.accountId&&(this.stripe=await r.p.loadStripe(this.publishableKey,{stripeAccount:this.accountId}),this.elements=this.stripe.elements())}async confirmPayment(e){var t,i,s,o,n,r,a,l,d,c,h,u,p,m,f,v;if(!this.disabled&&"finalized"===(null==e?void 0:e.status)&&"stripe"===(null===(t=null==e?void 0:e.payment_intent)||void 0===t?void 0:t.processor_type)&&(null===(i=null==e?void 0:e.payment_intent)||void 0===i?void 0:i.external_intent_id)&&(null===(n=null===(o=null===(s=null==e?void 0:e.payment_intent)||void 0===s?void 0:s.processor_data)||void 0===o?void 0:o.stripe)||void 0===n?void 0:n.client_secret)&&(null===(l=null===(a=null===(r=null==e?void 0:e.payment_intent)||void 0===r?void 0:r.processor_data)||void 0===a?void 0:a.stripe)||void 0===l?void 0:l.type)&&!this.confirming){this.confirming=!0;try{let t;if(t="setup"==(null===(h=null===(c=null===(d=null==e?void 0:e.payment_intent)||void 0===d?void 0:d.processor_data)||void 0===c?void 0:c.stripe)||void 0===h?void 0:h.type)?await this.confirmCardSetup(null===(p=null===(u=null==e?void 0:e.payment_intent)||void 0===u?void 0:u.processor_data)||void 0===p?void 0:p.stripe.client_secret):await this.confirmCardPayment(null===(v=null===(f=null===(m=null==e?void 0:e.payment_intent)||void 0===m?void 0:m.processor_data)||void 0===f?void 0:f.stripe)||void 0===v?void 0:v.client_secret),null==t?void 0:t.error)throw this.error=t.error.message,t.error;this.scPaid.emit()}catch(e){this.scPayError.emit(e),e.message&&(this.error=e.message)}finally{this.confirming=!1}}}async confirmCardPayment(e){var t,i;return this.stripe.confirmCardPayment(e,{payment_method:{card:this.element,billing_details:{...(null===(t=null==this?void 0:this.order)||void 0===t?void 0:t.name)?{name:this.order.name}:{},...(null===(i=null==this?void 0:this.order)||void 0===i?void 0:i.email)?{email:this.order.email}:{}}}})}async confirmCardSetup(e){var t,i;return this.stripe.confirmCardSetup(e,{payment_method:{card:this.element,billing_details:{...(null===(t=null==this?void 0:this.order)||void 0===t?void 0:t.name)?{name:this.order.name}:{},...(null===(i=null==this?void 0:this.order)||void 0===i?void 0:i.email)?{email:this.order.email}:{}}}})}componentDidLoad(){this.elements&&(this.elements.create("card",{style:{base:{color:"#303238",fontSize:"16px",fontSmoothing:"antialiased","::placeholder":{color:"#CFD7DF"}},invalid:{color:"#e5424d",":focus":{color:"#303238"}}}}).mount(this.container),this.element=this.elements.getElement("card"),this.element.on("change",(e=>{var t;return this.error=(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)?e.error.message:""})),this.element.on("focus",(()=>this.hasFocus=!0)),this.element.on("blur",(()=>this.hasFocus=!1)))}render(){return(0,s.h)(s.F,null,(0,s.h)("sc-input",{class:"sc-stripe",size:this.size,label:this.label,hasFocus:this.hasFocus},(0,s.h)("div",{ref:e=>this.container=e})),this.error&&(0,s.h)("sc-text",{style:{color:"var(--sc-color-danger-500)","--font-size":"var(--sc-font-size-small)",marginTop:"0.5em"}},this.error))}get el(){return(0,s.g)(this)}static get watchers(){return{order:["confirmPayment"]}}};h.style="sc-stripe-element{display:block}sc-stripe-element sc-input{--sc-input-height-medium:auto}.sc-stripe *{font-family:var(--sc-input-font-family);font-weight:var(--sc-input-font-weight);font-size:var(--sc-input-font-size)}.sc-stripe fieldset{margin:0 15px 20px;padding:0;border-style:none;background-color:#7795f8;box-shadow:0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08), inset 0 1px 0 #829fff;border-radius:4px}.sc-stripe .row{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-left:15px}.sc-stripe .row+.row{border-top:1px solid #819efc}.sc-stripe label{width:15%;min-width:70px;padding:11px 0;color:#c4f0ff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sc-stripe input,.sc-stripe button{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;border-style:none}.sc-stripe input:-webkit-autofill{-webkit-text-fill-color:#fce883;transition:background-color 100000000s;-webkit-animation:1ms void-animation-out}.sc-stripe .StripeElement--webkit-autofill{background:transparent !important}.sc-stripe .StripeElement{width:100%;padding:var(--sc-input-spacing-small)}.sc-stripe input{width:100%;padding:11px;color:#fff;background-color:transparent;-webkit-animation:1ms void-animation-out}.sc-stripe input::-webkit-input-placeholder{color:#87bbfd}.sc-stripe input::-moz-placeholder{color:#87bbfd}.sc-stripe input:-ms-input-placeholder{color:#87bbfd}.sc-stripe button{display:block;width:calc(100% - 30px);height:40px;margin:40px 15px 0;background-color:#f6a4eb;box-shadow:0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08), inset 0 1px 0 #ffb9f6;border-radius:4px;color:#fff;font-weight:600;cursor:pointer}.sc-stripe button:active{background-color:#d782d9;box-shadow:0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08), inset 0 1px 0 #e298d8}.sc-stripe .error svg .base{fill:#fff}.sc-stripe .error svg .glyph{fill:#6772e5}.sc-stripe .error .message{color:#fff}.sc-stripe .success .icon .border{stroke:#87bbfd}.sc-stripe .success .icon .checkmark{stroke:#fff}.sc-stripe .success .title{color:#fff}.sc-stripe .success .message{color:#9cdbff}.sc-stripe .success .reset path{fill:#fff}";const u=class{constructor(e){(0,s.r)(this,e),this.scShow=(0,s.c)(this,"scShow",7),this.scHide=(0,s.c)(this,"scHide",7),this.open=!1,this.disabled=!1,this.borderless=!1,this.shady=!1,this.showControl=!1,this.showIcon=!0,this.collapsible=!0}componentDidLoad(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}async show(){this.open||this.disabled||(this.open=!0)}async hide(){this.open&&!this.disabled&&this.collapsible&&(this.open=!1)}handleSummaryClick(){this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.open?this.hide():this.show()),"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),this.hide()),"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this.show())}async handleOpenChange(){if(this.open){this.scShow.emit(),await(0,a.s)(this.body),this.body.hidden=!1;const{keyframes:e,options:t}=(0,a.g)(this.el,"details.show");await(0,a.a)(this.body,(0,a.c)(e,this.body.scrollHeight),t),this.body.style.height="auto"}else{this.scHide.emit(),await(0,a.s)(this.body);const{keyframes:e,options:t}=(0,a.g)(this.el,"details.hide");await(0,a.a)(this.body,(0,a.c)(e,this.body.scrollHeight),t),this.body.hidden=!0,this.body.style.height="auto"}}render(){return(0,s.h)("div",{part:"base",class:{details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--borderless":this.borderless,"details--shady":this.shady}},(0,s.h)("header",{ref:e=>this.header=e,part:"header",id:"header",class:"details__header",role:"button","aria-expanded":this.open?"true":"false","aria-controls":"content","aria-disabled":this.disabled?"true":"false",tabindex:this.disabled?"-1":"0",onClick:()=>this.handleSummaryClick(),onKeyDown:e=>this.handleSummaryKeyDown(e)},this.showControl&&(0,s.h)("span",{part:"radio",class:"details__radio"},(0,s.h)("svg",{viewBox:"0 0 16 16"},(0,s.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,s.h)("g",{fill:"currentColor"},(0,s.h)("circle",{cx:"8",cy:"8",r:"3.42857143"}))))),(0,s.h)("div",{part:"summary",class:"details__summary"},(0,s.h)("slot",{name:"summary"},this.summary)),this.showIcon&&(0,s.h)("span",{part:"summary-icon",class:"details__summary-icon"},(0,s.h)("slot",{name:"icon"},(0,s.h)("sc-icon",{name:"chevron-right"})))),(0,s.h)("div",{class:"details__body",ref:e=>this.body=e},(0,s.h)("div",{part:"content",id:"content",class:"details__content",role:"region","aria-labelledby":"header"},(0,s.h)("slot",null))))}get el(){return(0,s.g)(this)}static get watchers(){return{open:["handleOpenChange"]}}};(0,a.b)("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"ease"}}),(0,a.b)("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"ease"}}),u.style=":host{display:block;font-family:var(--sc-font-sans)}.details{border-radius:var(--sc-border-radius-medium);background-color:var(--sc-color-white);overflow-anchor:none}.details__radio{flex:0 0 auto;position:relative;display:inline-flex;align-items:center;justify-content:center;margin-right:0.75em;background-color:var(--sc-input-background-color);color:transparent;border-radius:50%;border:solid var(--sc-input-border-width) var(--sc-input-border-color);background-color:var(--sc-input-background-color);display:inline-flex;color:transparent;width:var(--sc-radio-size);height:var(--sc-radio-size);transition:var(--sc-transition-fast) border-color, var(--sc-transition-fast) background-color, var(--sc-transition-fast) color, var(--sc-transition-fast) box-shadow}.details__radio svg{width:100%;height:100%}.details--open .details__radio{color:var(--sc-color-white);border-color:var(--sc-color-primary-500);background-color:var(--sc-color-primary-500)}.details:not(.details--borderless){border:solid 1px var(--sc-color-gray-200)}.details--disabled{opacity:0.5}.details__header{display:flex;align-items:center;border-radius:inherit;padding:var(--sc-spacing-medium);user-select:none;cursor:pointer}.details__header:focus{outline:none}.details__header:focus-visible{box-shadow:var(--sc-focus-ring)}.details--disabled .details__header{cursor:not-allowed}.details--disabled .details__header:focus-visible{outline:none;box-shadow:none}.details__summary{flex:1 1 auto;display:flex;align-items:center}.details__summary-icon{flex:0 0 auto;display:flex;align-items:center;transition:var(--sc-transition-medium) transform ease}.details--open .details__summary-icon{transform:rotate(90deg)}.details__body{overflow:hidden;border-top:solid var(--sc-input-border-width) var(--sc-input-border-color)}.details--shady .details__body{background:var(--sc-color-gray-50)}.details__content{padding:var(--sc-spacing-medium)}";const p=class{constructor(e){(0,s.r)(this,e),this.accordion=!1,this.collapsible=!0,this.theme="default"}getToggles(){var e,t,i;let s=this.el.shadowRoot.querySelector("slot");if(s)return(null===(i=null===(t=null===(e=null==s?void 0:s.assignedNodes)||void 0===e?void 0:e.call(s))||void 0===t?void 0:t.filter)||void 0===i?void 0:i.call(t,(e=>"SC-TOGGLE"===e.nodeName)))||[]}handleShowChange(e){this.accordion&&this.getToggles().map((t=>t.open=e.target===t))}handleCollapibleChange(){this.getToggles().map((e=>e.collapsible=this.collapsible))}componentDidLoad(){this.handleCollapibleChange();const e=this.getToggles();(null==e?void 0:e.length)&&!e.some((e=>e.open))&&(e[0].open=!0)}render(){const e="container"===this.theme?"sc-card":"div";return(0,s.h)(e,{class:{toggles:!0,[`toggles--theme-${this.theme}`]:!0},part:"base","no-padding":!0},(0,s.h)("slot",null))}get el(){return(0,s.g)(this)}static get watchers(){return{collapsible:["handleCollapibleChange"]}}};p.style=":host{display:block;--toggle-spacing:0}::slotted(*){margin-bottom:var(--toggle-spacing)}::slotted([borderless]:not(:last-child)){border-bottom:1px solid var(--sc-color-gray-200)}"}}]);
//# sourceMappingURL=6973.js.map