{"version":3,"file":"7145.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components/dist/esm/add-query-args-f4c5962b.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/sc-downloads-list.entry.js"],"sourcesContent":["/**\n * Returns the query string part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const queryString = getQueryString( 'http://localhost:8080/this/is/a/test?query=true#fragment' ); // 'query=true'\n * ```\n *\n * @return {string|void} The query string part of the URL.\n */\nfunction getQueryString(url) {\n  let query;\n\n  try {\n    query = new URL(url, 'http://example.com').search.substring(1);\n  } catch (error) {}\n\n  if (query) {\n    return query;\n  }\n}\n\n/**\n * Generates URL-encoded query string using input query data.\n *\n * It is intended to behave equivalent as PHP's `http_build_query`, configured\n * with encoding type PHP_QUERY_RFC3986 (spaces as `%20`).\n *\n * @example\n * ```js\n * const queryString = buildQueryString( {\n *    simple: 'is ok',\n *    arrays: [ 'are', 'fine', 'too' ],\n *    objects: {\n *       evenNested: {\n *          ok: 'yes',\n *       },\n *    },\n * } );\n * // \"simple=is%20ok&arrays%5B0%5D=are&arrays%5B1%5D=fine&arrays%5B2%5D=too&objects%5BevenNested%5D%5Bok%5D=yes\"\n * ```\n *\n * @param {Record<string,*>} data Data to encode.\n *\n * @return {string} Query string.\n */\nfunction buildQueryString(data) {\n  let string = '';\n  const stack = Object.entries(data);\n  let pair;\n\n  while (pair = stack.shift()) {\n    let [key, value] = pair; // Support building deeply nested data, from array or object values.\n\n    const hasNestedData = Array.isArray(value) || value && value.constructor === Object;\n\n    if (hasNestedData) {\n      // Push array or object values onto the stack as composed of their\n      // original key and nested index or key, retaining order by a\n      // combination of Array#reverse and Array#unshift onto the stack.\n      const valuePairs = Object.entries(value).reverse();\n\n      for (const [member, memberValue] of valuePairs) {\n        stack.unshift([`${key}[${member}]`, memberValue]);\n      }\n    } else if (value !== undefined) {\n      // Null is treated as special case, equivalent to empty string.\n      if (value === null) {\n        value = '';\n      }\n\n      string += '&' + [key, value].map(encodeURIComponent).join('=');\n    }\n  } // Loop will concatenate with leading `&`, but it's only expected for all\n  // but the first query parameter. This strips the leading `&`, while still\n  // accounting for the case that the string may in-fact be empty.\n\n\n  return string.substr(1);\n}\n\n/**\n * Internal dependencies\n */\n/** @typedef {import('./get-query-arg').QueryArgParsed} QueryArgParsed */\n\n/**\n * @typedef {Record<string,QueryArgParsed>} QueryArgs\n */\n\n/**\n * Sets a value in object deeply by a given array of path segments. Mutates the\n * object reference.\n *\n * @param {Record<string,*>} object Object in which to assign.\n * @param {string[]}         path   Path segment at which to set value.\n * @param {*}                value  Value to set.\n */\n\nfunction setPath(object, path, value) {\n  const length = path.length;\n  const lastIndex = length - 1;\n\n  for (let i = 0; i < length; i++) {\n    let key = path[i];\n\n    if (!key && Array.isArray(object)) {\n      // If key is empty string and next value is array, derive key from\n      // the current length of the array.\n      key = object.length.toString();\n    } // If the next key in the path is numeric (or empty string), it will be\n    // created as an array. Otherwise, it will be created as an object.\n\n\n    const isNextKeyArrayIndex = !isNaN(Number(path[i + 1]));\n    object[key] = i === lastIndex ? // If at end of path, assign the intended value.\n    value : // Otherwise, advance to the next object in the path, creating\n    // it if it does not yet exist.\n    object[key] || (isNextKeyArrayIndex ? [] : {});\n\n    if (Array.isArray(object[key]) && !isNextKeyArrayIndex) {\n      // If we current key is non-numeric, but the next value is an\n      // array, coerce the value to an object.\n      object[key] = { ...object[key]\n      };\n    } // Update working reference object to the next in the path.\n\n\n    object = object[key];\n  }\n}\n/**\n * Returns an object of query arguments of the given URL. If the given URL is\n * invalid or has no querystring, an empty object is returned.\n *\n * @param {string} url URL.\n *\n * @example\n * ```js\n * const foo = getQueryArgs( 'https://wordpress.org?foo=bar&bar=baz' );\n * // { \"foo\": \"bar\", \"bar\": \"baz\" }\n * ```\n *\n * @return {QueryArgs} Query args object.\n */\n\n\nfunction getQueryArgs(url) {\n  return (getQueryString(url) || '' // Normalize space encoding, accounting for PHP URL encoding\n  // corresponding to `application/x-www-form-urlencoded`.\n  //\n  // See: https://tools.ietf.org/html/rfc1866#section-8.2.1\n  ).replace(/\\+/g, '%20').split('&').reduce((accumulator, keyValue) => {\n    const [key, value = ''] = keyValue.split('=') // Filtering avoids decoding as `undefined` for value, where\n    // default is restored in destructuring assignment.\n    .filter(Boolean).map(decodeURIComponent);\n\n    if (key) {\n      const segments = key.replace(/\\]/g, '').split('[');\n      setPath(accumulator, segments, value);\n    }\n\n    return accumulator;\n  }, {});\n}\n\n/**\n * Internal dependencies\n */\n/**\n * Appends arguments as querystring to the provided URL. If the URL already\n * includes query arguments, the arguments are merged with (and take precedent\n * over) the existing set.\n *\n * @param {string} [url=''] URL to which arguments should be appended. If omitted,\n *                          only the resulting querystring is returned.\n * @param {Object} [args]   Query arguments to apply to URL.\n *\n * @example\n * ```js\n * const newURL = addQueryArgs( 'https://google.com', { q: 'test' } ); // https://google.com/?q=test\n * ```\n *\n * @return {string} URL with arguments applied.\n */\n\nfunction addQueryArgs() {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  let args = arguments.length > 1 ? arguments[1] : undefined;\n\n  // If no arguments are to be appended, return original URL.\n  if (!args || !Object.keys(args).length) {\n    return url;\n  }\n\n  let baseUrl = url; // Determine whether URL already had query arguments.\n\n  const queryStringIndex = url.indexOf('?');\n\n  if (queryStringIndex !== -1) {\n    // Merge into existing query arguments.\n    args = Object.assign(getQueryArgs(url), args); // Change working base URL to omit previous query arguments.\n\n    baseUrl = baseUrl.substr(0, queryStringIndex);\n  }\n\n  return baseUrl + '?' + buildQueryString(args);\n}\n\nexport { addQueryArgs as a, buildQueryString as b, getQueryArgs as g };\n","import { r as registerInstance, h, g as getElement } from './index-430bb51b.js';\nimport { _ as __, s as sprintf, a as _n } from './default-i18n-c67eee5a.js';\nimport { a as addQueryArgs } from './add-query-args-f4c5962b.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scDownloadsListCss = \":host{display:block}.download__details{opacity:0.75}\";\n\nconst ScDownloadsList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.purchases = [];\n  }\n  renderEmpty() {\n    return (h(\"div\", null, h(\"sc-divider\", { style: { '--spacing': '0' } }), h(\"slot\", { name: \"empty\" }, h(\"sc-empty\", { icon: \"download\" }, __(\"You don't have any downloads.\", 'surecart')))));\n  }\n  renderLoading() {\n    return (h(\"sc-card\", { \"no-padding\": true, style: { '--overflow': 'hidden' } }, h(\"sc-stacked-list\", null, h(\"sc-stacked-list-row\", { style: { '--columns': '2' }, \"mobile-size\": 0 }, h(\"div\", { style: { padding: '0.5em' } }, h(\"sc-skeleton\", { style: { width: '30%', marginBottom: '0.75em' } }), h(\"sc-skeleton\", { style: { width: '20%' } }))))));\n  }\n  renderList() {\n    return this.purchases.map(purchase => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n      return (h(\"sc-stacked-list-row\", { href: !(purchase === null || purchase === void 0 ? void 0 : purchase.revoked)\n          ? addQueryArgs(window.location.href, {\n            action: 'edit',\n            model: 'download',\n            id: purchase.id,\n            nonce: this.requestNonce,\n          })\n          : null, key: purchase.id, \"mobile-size\": 0 }, h(\"sc-spacing\", { style: {\n          '--spacing': 'var(--sc-spacing-xx--small)',\n        } }, h(\"div\", null, h(\"strong\", null, (_a = purchase === null || purchase === void 0 ? void 0 : purchase.product) === null || _a === void 0 ? void 0 : _a.name)), h(\"div\", { class: \"download__details\" }, sprintf(_n('%s file', '%s files', (_d = (_c = (_b = purchase === null || purchase === void 0 ? void 0 : purchase.product) === null || _b === void 0 ? void 0 : _b.files) === null || _c === void 0 ? void 0 : _c.pagination) === null || _d === void 0 ? void 0 : _d.count, 'surecart'), (_g = (_f = (_e = purchase === null || purchase === void 0 ? void 0 : purchase.product) === null || _e === void 0 ? void 0 : _e.files) === null || _f === void 0 ? void 0 : _f.pagination) === null || _g === void 0 ? void 0 : _g.count), ' ', \"\\u2022 \", h(\"sc-format-bytes\", { value: (_j = (_h = purchase === null || purchase === void 0 ? void 0 : purchase.product) === null || _h === void 0 ? void 0 : _h.files) === null || _j === void 0 ? void 0 : _j.data.map(item => item.byte_size).reduce((prev, curr) => prev + curr, 0) }))), h(\"sc-icon\", { name: \"chevron-right\", slot: \"suffix\" })));\n    });\n  }\n  renderContent() {\n    var _a;\n    if (this.loading) {\n      return this.renderLoading();\n    }\n    if (((_a = this.purchases) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n      return this.renderEmpty();\n    }\n    return (h(\"sc-card\", { \"no-padding\": true, style: { '--overflow': 'hidden' } }, h(\"sc-stacked-list\", null, this.renderList())));\n  }\n  render() {\n    return (h(\"sc-dashboard-module\", { class: \"downloads-list\", error: this.error }, h(\"span\", { slot: \"heading\" }, h(\"slot\", { name: \"heading\" }, this.heading || __('Items', 'surecart'))), h(\"slot\", { name: \"before\" }), !!this.allLink && (h(\"sc-button\", { type: \"link\", href: this.allLink, slot: \"end\" }, __('View all', 'surecart'), h(\"sc-icon\", { name: \"chevron-right\", slot: \"suffix\" }))), this.renderContent(), h(\"slot\", { name: \"after\" }), this.busy && h(\"sc-block-ui\", null)));\n  }\n  get el() { return getElement(this); }\n};\nScDownloadsList.style = scDownloadsListCss;\n\nexport { ScDownloadsList as sc_downloads_list };\n"],"names":["buildQueryString","data","string","stack","Object","entries","pair","shift","key","value","Array","isArray","constructor","valuePairs","reverse","member","memberValue","unshift","undefined","map","encodeURIComponent","join","substr","getQueryArgs","url","query","URL","search","substring","error","getQueryString","replace","split","reduce","accumulator","keyValue","filter","Boolean","decodeURIComponent","object","path","length","lastIndex","i","toString","isNextKeyArrayIndex","isNaN","Number","setPath","addQueryArgs","arguments","args","keys","baseUrl","queryStringIndex","indexOf","assign","ScDownloadsList","hostRef","r","this","purchases","renderEmpty","h","style","name","icon","_","renderLoading","padding","width","marginBottom","renderList","purchase","_a","_b","_c","_d","_e","_f","_g","_h","_j","href","revoked","a","window","location","action","model","id","nonce","requestNonce","product","class","s","files","pagination","count","item","byte_size","prev","curr","slot","renderContent","loading","render","heading","allLink","type","busy","el","g"],"sourceRoot":""}