@import "./utils/mixins.scss";

.is-root-container {
	font-size: var( --srfm-font-size );
	margin-top: 2em;

	.srfm-block-wrap {
		pointer-events: none;
	}

	.srfm-block-text,
	.srfm-block-label {
		&.srfm-required::after {
			content: " *";
			color: var( --srfm-error-color-light );
		}
	}

	.srfm-input-common {
		@include srfm-input-common-styles( true );
	}

	.srfm-input-input {
		height: var( --srfm-input-height );
	}

	.srfm-with-icon {
		.srfm-input-common {
			padding-left: 2.4em;
		}

		.srfm-input-icon {
			display: block;
			position: absolute;
			top: 50%;
			left: 0.7em;
			transform: translateY( -50% );
			line-height: 0;

			svg {
				width: 0.9em;
				height: 0.9em;
				stroke: var( --srfm-body-input-color );

				path {
					stroke: var( --srfm-body-input-color );
				}
			}
		}
	}

	.srfm-description {
		display: block;
		@include srfm-description-styles;
	}

	.srfm-error-wrap {
		height: var( --srfm-error-line-height );
	}

	// checkbox and gdpr
	.srfm-checkbox-block,
	.srfm-gdpr-block {
		.srfm-description {
			margin-left: 24px;
		}

		.srfm-block-wrap {
			* {
				box-sizing: border-box;
			}

			.srfm-block-url {
				color: var( --srfm-primary-color );
			}

			.srfm-cbx {
				display: flex;
				gap: 8px;
				align-items: flex-start;
				-webkit-user-select: none;
				user-select: none;
				cursor: pointer;
				overflow: hidden;
				transition: 0.3s ease-out;

				&:not( :last-child ) {
					margin-right: 6px;
				}

				.srfm-block-text {
					flex: 1;
				}

				.srfm-span-wrap {
					float: left;
					vertical-align: middle;
					transform: translate3d( 0, 0, 0 );

					&:first-child {
						position: absolute;
						width: var( --srfm-check-ctn-width );
						height: var( --srfm-check-ctn-height );
						border-radius: 4px;
						transform: scale( 1 );
						border: 1px solid var( --srfm-border-color );
						background-color: var( --srfm-base-background-color );
						transition: 0.3s ease-out;

						svg {
							position: absolute;
							top: var( --srfm-check-svg-top );
							left: var( --srfm-check-svg-left );
							fill: none;
							width: var( --srfm-check-svg-width );
							height: var( --srfm-check-svg-height );
							stroke: #fff;
							stroke-width: 2;
							stroke-linecap: round;
							stroke-linejoin: round;
							stroke-dasharray: 16px;
							stroke-dashoffset: 16px;
							transition: 0.3s ease-out;
							transform: translate3d( 0, 0, 0 );
						}
					}

					&:last-child {
						position: relative;
						left: 24px;
						line-height: 18px;
						max-width: calc( 100% - 26px );
						word-wrap: break-word;
					}
				}

				@media screen and ( max-width: 640px ) {
					width: 100%;
				}
			}

			.srfm-input-checkbox,
			.srfm-input-gdpr {
				display: none;

				&:focus {
					+ {
						.srfm-cbx {
							span {
								&:first-child:not( .srfm-required ) {
									border-color: var( --srfm-primary-color );
									box-shadow: 0px 0px 0px 3px var( --srfm-color-input-border-focus-glow ); // margin: 4px;
									svg {
										stroke-dashoffset: 0;
									}
								}
							}
						}
					}
				}

				position: absolute;

				&:checked {
					+ {
						.srfm-cbx {
							span {
								&:first-child:not( .srfm-required ) {
									background: var( --srfm-primary-color );
									border-color: var( --srfm-primary-color );
									svg {
										stroke-dashoffset: 0;
									}
								}
							}
						}
					}
				}
			}

			.srfm-inline-svg {
				position: absolute;
				width: 0;
				height: 0;
				pointer-events: none;
				user-select: none;
			}
		}
	}

	.srfm-input-textarea {
		height: unset !important;
	}

	// Address block styles.
	.srfm-address-block-wrap {
		.srfm-block-wrap {
			display: flex;
			flex-wrap: wrap;
		}
		.block-editor-inner-blocks {
			margin-top: var( --srfm-gap-below-address-label );

			.block-editor-block-list__layout {
				@include srfm-address-block-styles;

				.block-editor-block-list__block {
					@include srfm-no-margin-padding;
				}
			}
		}
		.block-editor-block-list__block,
		.block-list-appender {
			margin-top: 1em !important;
		}
	}

	// Number
	div[data-type="srfm/number"] {
		.srfm-input-number {
			&::-webkit-inner-spin-button,
			&::-webkit-outer-spin-button {
				appearance: none;
			}
		}
	}

	//Checkbox & GDPR.
	div[data-type="srfm/checkbox"],
	div[data-type="srfm/gdpr"] {
		.srfm-block-wrap {
			input {
				margin: 0;
				border: 1px solid var( --srfm-border-color );
				box-shadow: none;
			}

			.srfm-block-text {
				font-size: 0.7em;
				padding-left: 8px;
				line-height: 18px;
				pointer-events: all;
				color: var( --srfm-label-text-color );
			}
		}
	}

	// Multi select.
	div[data-type="srfm/multi-choice"] {
		&.is-selected {
			.srfm-block-wrap {
				pointer-events: initial;
			}
		}

		.srfm-block-wrap {
			@include srfm-multi-choice-wrap-styles;

			.srfm-multi-choice-single {
				@include srfm-multi-choice-single-styles;

				.srfm-input-common {
					width: calc( 100% - 3em );
					margin: 0 !important;
					height: auto !important;
				}

				.components-button {
					width: 1em;
					height: 1em;
					padding: 1em;
				}

				.srfm-block-content-wrap {
					@include srfm-multi-choice-block-content-wrap-styles( true );
					width: auto;

					.srfm-multi-choice-icon {
						@include srfm-multi-choice-icon-styles;
					}
				}

				@media ( max-width: 430px ) {
					width: 100%;
				}
			}

			.srfm-multi-choice-add-option-wrapper {
				width: 100%;
				margin-top: 4px;
				margin-left:4px;
			}

			@include srfm-multi-choice-vertical-layout( true );
		}
	}

	// Phone.
	div[data-type="srfm/phone"] {
		.flag-container {
			.arrow {
				&:after {
					background-color: transparent;
					color: var( --srfm-body-input-color );
				}
			}
		}
	}

	// Select / Dropdown
	div[data-type="srfm/dropdown"] {
		.srfm-dropdown-common-wrap {
			position: relative;
			width: 100%;
			color: var( --srfm-placeholder-color );

			input[type="text"] {
				padding-right: 2em;
				&:placeholder-shown {
					text-overflow: ellipsis;
				}
			}

			input[type="text"].srfm-address-country-wrap {
				padding-right: 2.2em;
				border-bottom: 0;
				border-radius: 0;
			}

			.srfm-input-common {
				width: 100%;
			}

			&::after {
				content: "";
				position: absolute;
				width: 0.5em;
				height: 0.5em;
				font-size: 0.7em;
				border: 1px solid var( --srfm-body-input-color );
				border-left: 0;
				border-top: 0;
				transform: rotate( 45deg );
				right: 1em;
				top: 1em;
			}
		}
	}
}

.editor-styles-wrapper {
	&::before {
		background-color: red;
	}
}
