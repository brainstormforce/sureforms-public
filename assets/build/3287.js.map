{"version":3,"file":"3287.js","mappings":"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","sources":["webpack://sureforms/./node_modules/@surecart/components/dist/esm/lazy-64c2bf3b.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/price-ca142cc6.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/sc-upcoming-invoice.entry.js","webpack://sureforms/./node_modules/@surecart/components/dist/esm/util-2b5ae7fb.js"],"sourcesContent":["/** Do something the first time the element is visible */\nconst onFirstVisible = (el, callback) => {\n  const intersectionObserver = new window.IntersectionObserver((entries, observer) => {\n    if (entries[0].intersectionRatio > 0) {\n      callback();\n      observer.unobserve(entries[0].target);\n    }\n  });\n  intersectionObserver.observe(el);\n};\n\nexport { onFirstVisible as o };\n","import { _ as __, s as sprintf, a as _n } from './default-i18n-c67eee5a.js';\n\nconst convertAmount = (amount, currency) => {\n  return ['bif', 'clp', 'djf', 'gnf', 'jpy', 'kmf', 'krw'].includes(currency) ? amount : amount / 100;\n};\nconst getHumanDiscount = (coupon) => {\n  if (coupon.amount_off && coupon.currency) {\n    return getFormattedPrice({ amount: coupon.amount_off, currency: coupon.currency });\n  }\n  if (coupon.percent_off) {\n    // TODO: Translators.\n    return `${coupon.percent_off | 0}% off`;\n  }\n  return '';\n};\nconst getFormattedPrice = ({ amount, currency }) => {\n  const converted = convertAmount(amount, currency);\n  return `${new Intl.NumberFormat(undefined, {\n    style: 'currency',\n    currency: currency,\n  }).format(parseFloat(converted.toFixed(2)))}`;\n};\n// get the currency symbol for a currency code.\nconst getCurrencySymbol = (code = 'usd') => {\n  const [currency] = new Intl.NumberFormat(undefined, {\n    style: 'currency',\n    currency: code,\n  }).formatToParts();\n  return currency === null || currency === void 0 ? void 0 : currency.value;\n};\nconst translateInterval = (amount, interval, prefix = __('every', 'surecart'), fallback = __('once', 'surecart'), showSingle = false) => {\n  switch (interval) {\n    case 'day':\n      return `${prefix} ${sprintf(showSingle ? _n('%d day', '%d days', amount, 'surecart') : _n('day', '%d days', amount, 'surecart'), amount)}`;\n    case 'week':\n      return `${prefix} ${sprintf(showSingle ? _n('%d week', '%d weeks', amount, 'surecart') : _n('week', '%d weeks', amount, 'surecart'), amount)}`;\n    case 'month':\n      return `${prefix} ${sprintf(showSingle ? _n('%d month', '%d months', amount, 'surecart') : _n('month', '%d months', amount, 'surecart'), amount)}`;\n    case 'year':\n      return `${prefix} ${sprintf(showSingle ? _n('%d year', '%d years', amount, 'surecart') : _n('year', '%d years', amount, 'surecart'), amount)}`;\n    default:\n      return fallback;\n  }\n};\nconst intervalString = (price, options = {}) => {\n  if (!price) {\n    return '';\n  }\n  const { showOnce, labels } = options;\n  const { interval = __('every', 'surecart'), period = __('for', 'surecart') } = labels || {};\n  return `${intervalCountString(price, interval, !!showOnce ? __('once', 'surecart') : '')} ${periodCountString(price, period)}`;\n};\nconst intervalCountString = (price, prefix, fallback = __('once', 'surecart')) => {\n  if (!price.recurring_interval_count || !price.recurring_interval) {\n    return '';\n  }\n  return translateInterval(price.recurring_interval_count, price.recurring_interval, ` ${prefix}`, fallback);\n};\nconst periodCountString = (price, prefix, fallback = '') => {\n  if (!(price === null || price === void 0 ? void 0 : price.recurring_period_count) || !(price === null || price === void 0 ? void 0 : price.recurring_interval)) {\n    return '';\n  }\n  return translateInterval(((price === null || price === void 0 ? void 0 : price.recurring_period_count) || 0) * (price === null || price === void 0 ? void 0 : price.recurring_interval_count), price === null || price === void 0 ? void 0 : price.recurring_interval, ` ${prefix}`, fallback, true);\n};\n\nexport { getCurrencySymbol as a, getHumanDiscount as g, intervalString as i, translateInterval as t };\n","import { r as registerInstance, h, F as Fragment, g as getElement } from './index-430bb51b.js';\nimport { _ as __ } from './default-i18n-c67eee5a.js';\nimport { a as apiFetch } from './fetch-d56a3ec0.js';\nimport { o as onFirstVisible } from './lazy-64c2bf3b.js';\nimport { i as intervalString } from './price-ca142cc6.js';\nimport { c as capitalize } from './util-2b5ae7fb.js';\nimport { a as addQueryArgs } from './add-query-args-f4c5962b.js';\nimport './_commonjsHelpers-9943807e.js';\n\nconst scUpcomingInvoiceCss = \":host{display:block;position:relative}.upcoming-invoice{display:grid;gap:var(--sc-spacing-large)}.upcoming-invoice>*{display:grid;gap:var(--sc-spacing-medium)}.new-plan{display:grid;gap:0.25em;color:var(--sc-color-gray-600)}.new-plan__heading{font-weight:var(--sc-font-weight-bold);color:var(--sc-color-gray-800)}\";\n\nconst ScUpcomingInvoice = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.quantityUpdatesEnabled = true;\n  }\n  componentWillLoad() {\n    onFirstVisible(this.el, () => {\n      this.fetchItems();\n    });\n  }\n  isFutureInvoice() {\n    return this.invoice.period_start_at >= new Date().getTime() / 1000;\n  }\n  async fetchItems() {\n    var _a, _b;\n    try {\n      this.loading = true;\n      await Promise.all([this.getInvoice(), this.getPrice()]);\n    }\n    catch (e) {\n      console.error(e);\n      this.error = ((_b = (_a = e === null || e === void 0 ? void 0 : e.additional_errors) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.message) || (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.loading = false;\n    }\n  }\n  async getPrice() {\n    if (!this.priceId)\n      return;\n    this.price = (await apiFetch({\n      path: addQueryArgs(`surecart/v1/prices/${this.priceId}`, {\n        expand: ['product'],\n      }),\n    }));\n  }\n  async getInvoice() {\n    if (!this.subscriptionId)\n      return;\n    this.invoice = (await apiFetch({\n      path: addQueryArgs(`surecart/v1/subscriptions/${this.subscriptionId}/upcoming_invoice/`, {\n        expand: [\n          'invoice.subscription',\n          'subscription.price',\n          'subscription.payment_method',\n          'payment_method.card',\n          'invoice.discount',\n          'invoice.invoice_items',\n          'invoice_item.price',\n          'price.product',\n        ],\n        subscription: {\n          price: this.priceId,\n          quantity: this.quantity,\n          ...(this.adHocAmount ? { ad_hoc_amount: this.adHocAmount } : {}),\n          ...(this.discount ? { discount: this.discount } : {}),\n        },\n      }),\n    }));\n    return this.invoice;\n  }\n  async applyCoupon(e) {\n    try {\n      this.couponError = '';\n      this.busy = true;\n      this.discount = {\n        promotion_code: e.detail,\n      };\n      await this.getInvoice();\n    }\n    catch (e) {\n      this.couponError = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.busy = false;\n    }\n  }\n  async updateQuantity(e) {\n    try {\n      this.error = '';\n      this.busy = true;\n      this.quantity = e.detail;\n      await this.getInvoice();\n    }\n    catch (e) {\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n    }\n    finally {\n      this.busy = false;\n    }\n  }\n  async onSubmit() {\n    try {\n      this.error = '';\n      this.busy = true;\n      await apiFetch({\n        path: `surecart/v1/subscriptions/${this.subscriptionId}`,\n        method: 'PATCH',\n        data: {\n          price: this.priceId,\n          quantity: this.quantity,\n          ...(this.adHocAmount ? { ad_hoc_amount: this.adHocAmount } : {}),\n          ...(this.discount ? { discount: this.discount } : {}),\n        },\n      });\n      if (this.successUrl) {\n        window.location.assign(this.successUrl);\n      }\n      else {\n        this.busy = false;\n      }\n    }\n    catch (e) {\n      this.error = (e === null || e === void 0 ? void 0 : e.message) || __('Something went wrong', 'surecart');\n      this.busy = false;\n    }\n  }\n  renderName(price) {\n    var _a;\n    if (typeof (price === null || price === void 0 ? void 0 : price.product) !== 'string') {\n      return (_a = price === null || price === void 0 ? void 0 : price.product) === null || _a === void 0 ? void 0 : _a.name;\n    }\n    return __('Plan', 'surecart');\n  }\n  renderRenewalText() {\n    var _a;\n    if (this.isFutureInvoice()) {\n      return (h(\"div\", null, __(\"You'll be switched to this plan\", 'surecart'), ' ', h(\"strong\", null, __('at the end of your billing cycle on', 'surecart'), ' ', h(\"sc-format-date\", { type: \"timestamp\", date: (_a = this.invoice) === null || _a === void 0 ? void 0 : _a.period_start_at, month: \"short\", day: \"numeric\", year: \"numeric\" }))));\n    }\n    return (h(\"div\", null, __(\"You'll be switched to this plan\", 'surecart'), \" \", h(\"strong\", null, __('immediately', 'surecart'))));\n  }\n  renderEmpty() {\n    return h(\"slot\", { name: \"empty\" }, __('Something went wrong.', 'surecart'));\n  }\n  renderLoading() {\n    return (h(\"div\", null, h(\"sc-skeleton\", { style: { width: '30%', marginBottom: '0.75em' } }), h(\"sc-skeleton\", { style: { width: '20%', marginBottom: '0.75em' } }), h(\"sc-skeleton\", { style: { width: '40%' } })));\n  }\n  renderContent() {\n    var _a, _b;\n    if (this.loading) {\n      return this.renderLoading();\n    }\n    if (!this.invoice) {\n      return this.renderEmpty();\n    }\n    return (h(\"div\", { class: \"new-plan\" }, h(\"div\", { class: \"new-plan__heading\" }, this.renderName(this.price)), h(\"div\", null, h(\"sc-format-number\", { type: \"currency\", currency: (_a = this === null || this === void 0 ? void 0 : this.invoice) === null || _a === void 0 ? void 0 : _a.currency, value: (_b = this === null || this === void 0 ? void 0 : this.invoice) === null || _b === void 0 ? void 0 : _b.total_amount }), ' ', intervalString(this.price)), h(\"div\", { style: { fontSize: 'var(--sc-font-size-small)' } }, this.renderRenewalText())));\n  }\n  renderPrice(key) {\n    var _a;\n    return h(\"sc-format-number\", { type: \"currency\", currency: this.invoice.currency, value: (_a = this.invoice) === null || _a === void 0 ? void 0 : _a[key] });\n  }\n  renderSummary() {\n    var _a, _b, _c;\n    if (this.loading) {\n      return this.renderLoading();\n    }\n    if (!this.invoice) {\n      return this.renderEmpty();\n    }\n    const { card } = this.invoice.subscription.payment_method;\n    return (h(Fragment, null, (_a = this.invoice.invoice_items) === null || _a === void 0 ? void 0 :\n      _a.data.map(item => {\n        var _a, _b, _c, _d, _e;\n        return (h(\"sc-product-line-item\", { imageUrl: (_b = (_a = item.price) === null || _a === void 0 ? void 0 : _a.product) === null || _b === void 0 ? void 0 : _b.image_url, name: (_d = (_c = item.price) === null || _c === void 0 ? void 0 : _c.product) === null || _d === void 0 ? void 0 : _d.name, editable: this.quantityUpdatesEnabled, removable: false, quantity: item === null || item === void 0 ? void 0 : item.quantity, amount: item === null || item === void 0 ? void 0 : item.total_amount, currency: (_e = item === null || item === void 0 ? void 0 : item.price) === null || _e === void 0 ? void 0 : _e.currency, interval: intervalString(item === null || item === void 0 ? void 0 : item.price), onScUpdateQuantity: e => this.updateQuantity(e) }));\n      }), h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, __('Subtotal', 'surecart')), h(\"span\", { slot: \"price\" }, this.renderPrice('subtotal_amount'))), h(\"sc-coupon-form\", { label: __('Add Coupon Code'), onScApplyCoupon: e => this.applyCoupon(e), error: this.couponError }, __('Add Coupon Code')), !!this.invoice.tax_amount && (h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, ((_b = this.invoice) === null || _b === void 0 ? void 0 : _b.tax_label) || __('Tax', 'surecart')), h(\"span\", { slot: \"price\" }, this.renderPrice('tax_amount')))), this.invoice.total_amount !== this.invoice.amount_due && (h(Fragment, null, h(\"sc-divider\", { style: { '--spacing': '0' } }), h(\"sc-line-item\", null, h(\"span\", { slot: \"title\" }, __('Total', 'surecart')), h(\"span\", { slot: \"price\" }, this.renderPrice('total_amount'))), !!this.invoice.proration_amount && (h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, __('Proration Credit', 'surecart')), h(\"span\", { slot: \"price\" }, this.renderPrice('proration_amount')))))), h(\"sc-divider\", { style: { '--spacing': '0' } }), h(\"sc-line-item\", null, h(\"span\", { slot: \"description\" }, __('Payment', 'surecart')), h(\"a\", { href: addQueryArgs(window.location.href, {\n        action: 'payment',\n      }), slot: \"price-description\" }, h(\"sc-flex\", { \"justify-content\": \"flex-start\", \"align-items\": \"center\", style: { '--spacing': '0.5em' } }, capitalize(card === null || card === void 0 ? void 0 : card.brand), h(\"span\", { style: { fontSize: '7px', whiteSpace: 'nowrap' } }, '\\u2B24', \" \", '\\u2B24', \" \", '\\u2B24', \" \", '\\u2B24'), h(\"span\", null, card === null || card === void 0 ? void 0 : card.last4), h(\"sc-icon\", { name: \"edit-3\" })))), h(\"sc-line-item\", { style: { '--price-size': 'var(--sc-font-size-x-large)' } }, h(\"span\", { slot: \"title\" }, __('Total Due Today', 'surecart')), this.isFutureInvoice() ? (h(\"sc-format-number\", { type: \"currency\", currency: (_c = this.invoice) === null || _c === void 0 ? void 0 : _c.currency, slot: \"price\" })) : (h(\"span\", { slot: \"price\" }, this.renderPrice('amount_due'))), h(\"span\", { slot: \"currency\" }, this.invoice.currency))));\n  }\n  render() {\n    return (h(\"div\", { class: \"upcoming-invoice\" }, this.error && (h(\"sc-alert\", { open: !!this.error, type: \"danger\" }, h(\"span\", { slot: \"title\" }, __('Error', 'surecart')), this.error)), h(Fragment, null, h(\"sc-dashboard-module\", { heading: __('New Plan', 'surecart'), class: \"plan-preview\", error: this.error }, h(\"sc-card\", null, this.renderContent())), h(\"sc-dashboard-module\", { heading: __('Summary', 'surecart'), class: \"plan-summary\" }, h(\"sc-form\", { onScFormSubmit: () => this.onSubmit() }, h(\"sc-card\", null, this.renderSummary()), h(\"sc-button\", { type: \"primary\", full: true, submit: true, loading: this.loading || this.busy, disabled: this.loading || this.busy }, __('Confirm', 'surecart')))), h(\"sc-text\", { style: { '--text-align': 'center', '--font-size': 'var(--sc-font-size-small)', '--line-height': 'var(--sc-line-height-normal)' } }, h(\"slot\", { name: \"terms\" }))), this.busy && h(\"sc-block-ui\", null)));\n  }\n  get el() { return getElement(this); }\n};\nScUpcomingInvoice.style = scUpcomingInvoiceCss;\n\nexport { ScUpcomingInvoice as sc_upcoming_invoice };\n","const capitalize = s => s && s[0].toUpperCase() + s.slice(1);\nconst isValidURL = str => {\n  let url;\n  try {\n    url = new URL(str);\n  }\n  catch (_) {\n    return false;\n  }\n  return url.protocol === 'http:' || url.protocol === 'https:';\n};\n\nexport { capitalize as c, isValidURL as i };\n"],"names":["onFirstVisible","el","callback","window","IntersectionObserver","entries","observer","intersectionRatio","unobserve","target","observe","getHumanDiscount","coupon","amount_off","currency","getFormattedPrice","amount","percent_off","converted","includes","convertAmount","Intl","NumberFormat","undefined","style","format","parseFloat","toFixed","getCurrencySymbol","code","formatToParts","value","translateInterval","interval","prefix","_","fallback","showSingle","s","intervalString","price","options","showOnce","labels","period","intervalCountString","periodCountString","recurring_interval_count","recurring_interval","recurring_period_count","ScUpcomingInvoice","constructor","hostRef","r","this","quantityUpdatesEnabled","componentWillLoad","o","fetchItems","isFutureInvoice","invoice","period_start_at","Date","getTime","async","_a","_b","loading","Promise","all","getInvoice","getPrice","e","console","error","additional_errors","message","priceId","a","path","expand","subscriptionId","subscription","quantity","adHocAmount","ad_hoc_amount","discount","couponError","busy","promotion_code","detail","method","data","successUrl","location","assign","renderName","product","name","renderRenewalText","h","type","date","month","day","year","renderEmpty","renderLoading","width","marginBottom","renderContent","class","total_amount","i","fontSize","renderPrice","key","renderSummary","_c","card","payment_method","F","invoice_items","map","item","_d","_e","imageUrl","image_url","editable","removable","onScUpdateQuantity","updateQuantity","slot","label","onScApplyCoupon","applyCoupon","tax_amount","tax_label","amount_due","proration_amount","href","action","c","brand","whiteSpace","last4","render","open","heading","onScFormSubmit","onSubmit","full","submit","disabled","g","capitalize","toUpperCase","slice","isValidURL","str","url","URL","protocol"],"sourceRoot":""}