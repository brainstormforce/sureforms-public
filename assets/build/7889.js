"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[7889],{682:function(e,s,t){t.d(s,{o:function(){return o}});var r=t(7492),o=function(e,s,t){void 0===t&&(t=!0);var o="Function"===e.constructor.name?e.prototype:e,i=o.componentWillLoad;o.componentWillLoad=function(){var e,o=this,n=(0,r.g)(this),l={promise:new Promise((function(s){e=s})),resolve:e},a=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:s,updater:function(e,s){(e in n?n:o)[e]=s},onOpen:l}});n.dispatchEvent(a);var c=function(){if(i)return i.call(o)};return t?l.promise.then((function(){return c()})):c()}}},30:function(e,s,t){t.d(s,{a:function(){return n},c:function(){return r},h:function(){return i},i:function(){return o}});const r=e=>((null==e?void 0:e.data)||[]).map((e=>({price_id:e.price.id,quantity:e.quantity}))),o=(e,s)=>{var t;return!!((null==(t=null==s?void 0:s.line_items)?void 0:t.data)||[]).map((e=>e.price.id)).find((s=>(null==e?void 0:e.id)===s))},i=e=>{var s,t,r;return!!(null===(t=null===(s=null==e?void 0:e.line_items)||void 0===s?void 0:s.data)||void 0===t?void 0:t.length)&&(null===(r=null==e?void 0:e.line_items.data)||void 0===r?void 0:r.some((e=>{var s;return null===(s=null==e?void 0:e.price)||void 0===s?void 0:s.recurring_interval_count})))},n=e=>{var s;return i(e)&&(null===(s=null==e?void 0:e.line_items.data)||void 0===s?void 0:s.some((e=>{var s;return null===(s=null==e?void 0:e.price)||void 0===s?void 0:s.recurring_period_count})))}},2692:function(e,s,t){t.d(s,{g:function(){return r}});const r=(e=[],s,t)=>{var r;return null===(r=(e||[]).find((e=>(null==e?void 0:e.processor_type)===s&&(null==e?void 0:e.live_mode)===!("live"!==t))))||void 0===r?void 0:r.processor_data}},7889:function(e,s,t){t.r(s),t.d(s,{sc_payment:function(){return a}});var r=t(7492),o=t(9988),i=t(682),n=t(30),l=t(2692);t(7094);const a=class{constructor(e){(0,r.r)(this,e),this.scSetProcessor=(0,r.c)(this,"scSetProcessor",7),this.processor="stripe",this.processors=[],this.mode="live",this.currencyCode="usd",this.defaultProcessor="stripe"}handleOrderChange(e,s){if((0,n.h)(this.order)||!this.defaultProcessor)return setTimeout((()=>{this.scSetProcessor.emit("stripe")}));s||this.handleDefaultChange()}handleDefaultChange(){this.defaultProcessor&&this.scSetProcessor.emit(this.defaultProcessor)}componentWillLoad(){this.setProcessors()}setProcessors(){this.stripe=(this.processors||[]).find((e=>"stripe"===e.processor_type&&(null==e?void 0:e.live_mode)===("live"===this.mode))),this.paypal=(this.processors||[]).find((e=>"paypal"===e.processor_type&&(null==e?void 0:e.live_mode)===("live"===this.mode)))}renderStripePaymentElement(){if(this.stripePaymentElement)return(0,r.h)("sc-order-stripe-payment-element",{order:this.order,mode:this.mode,processors:this.processors,"currency-code":this.currencyCode});const e=(0,l.g)(this.processors,"stripe",this.mode);return(0,r.h)("div",{class:"sc-payment__stripe-card-element"},(0,r.h)("sc-stripe-element",{order:this.order,mode:this.mode,publishableKey:null==e?void 0:e.publishable_key,accountId:null==e?void 0:e.account_id,secureText:this.secureNotice}),(0,r.h)("sc-secure-notice",null,this.secureNotice))}showProcessor(e){var s;return!(0,n.h)(this.order)||(null===(s=null==e?void 0:e.processor_data)||void 0===s?void 0:s.recurring_enabled)}renderTestModeBadge(){return this.hideTestModeBadge?null:"test"===this.mode&&(0,r.h)("sc-tag",{type:"warning",size:"small"},(0,o._)("Test Mode","surecart"))}renderStripeAndPayPal(){const e=this.showProcessor(this.paypal);return(0,r.h)("sc-form-control",{label:this.label},(0,r.h)("div",{class:"sc-payment-label",slot:"label"},(0,r.h)("div",null,this.label),this.renderTestModeBadge()),(0,r.h)("sc-toggles",{collapsible:!1,theme:"container"},(0,r.h)("sc-toggle",{"show-control":e,"show-icon":e,shady:!0,borderless:!0,open:"stripe"===this.processor,onScShow:()=>this.scSetProcessor.emit("stripe")},(0,r.h)("span",{slot:"summary",class:"sc-payment-toggle-summary"},(0,r.h)("sc-icon",{name:"credit-card",style:{fontSize:"24px"}}),(0,r.h)("span",null,(0,o._)("Credit Card","surecart"))),this.renderStripePaymentElement()),e&&(0,r.h)("sc-toggle",{"show-control":!0,shady:!0,borderless:!0,open:"paypal"===this.processor,onScShow:()=>this.scSetProcessor.emit("paypal")},(0,r.h)("span",{slot:"summary",class:"sc-payment-toggle-summary"},(0,r.h)("sc-icon",{name:"paypal",style:{width:"80px",fontSize:"24px"}})),(0,r.h)("div",{class:"sc-payment-instructions"},(0,o._)("You will be prompted by PayPal to complete your purchase securely.","surecart")))))}renderPayPal(){return(0,r.h)("sc-form-control",{label:this.label},(0,r.h)("div",{class:"sc-payment-label",slot:"label"},(0,r.h)("div",null,this.label),this.renderTestModeBadge()),(0,r.h)("sc-toggles",{collapsible:!1,theme:"container"},(0,r.h)("sc-toggle",{"data-test-id":"paypal-credit-card-toggle","show-control":!0,shady:!0,borderless:!0,open:"paypal-card"===this.processor,onScShow:()=>this.scSetProcessor.emit("paypal-card")},(0,r.h)("span",{slot:"summary",class:"sc-payment-toggle-summary"},(0,r.h)("sc-icon",{name:"credit-card",style:{fontSize:"24px"}}),(0,r.h)("span",null,(0,o._)("Credit Card","surecart"))),(0,r.h)("div",{class:"sc-payment-instructions"},(0,o._)("You will be prompted to complete your purchase securely.","surecart"))),(0,r.h)("sc-toggle",{"data-test-id":"paypal-toggle","show-control":!0,shady:!0,borderless:!0,open:"paypal"===this.processor,onScShow:()=>this.scSetProcessor.emit("paypal")},(0,r.h)("span",{slot:"summary",class:"sc-payment-toggle-summary"},(0,r.h)("sc-icon",{name:"paypal",style:{width:"80px",fontSize:"24px"}})),(0,r.h)("div",{class:"sc-payment-instructions"},(0,o._)("You will be prompted by PayPal to complete your purchase securely.","surecart")))))}renderLoading(){return(0,r.h)("div",null,(0,r.h)("sc-skeleton",{style:{width:"10%",marginBottom:"1em"}}),(0,r.h)("sc-skeleton",{style:{width:"100%",marginBottom:"1em"}}),(0,r.h)("sc-skeleton",{style:{width:"35%"}}))}getProcessor(){switch(this.processor){case"paypal":case"paypal-card":return"paypal";default:return"stripe"}}renderNoProcessors(){return(0,r.h)("sc-form-control",{label:this.label},(0,r.h)("sc-alert",{type:"info",open:!0},(0,o._)("Please contact us for payment","surecart")))}render(){var e,s,t,o,i;return!(0,n.h)(this.order)&&(null===(t=null===(s=null===(e=this.order)||void 0===e?void 0:e.line_items)||void 0===s?void 0:s.pagination)||void 0===t?void 0:t.count)>=1&&0===(null===(o=this.order)||void 0===o?void 0:o.total_amount)?null:(null===(i=this.processors)||void 0===i?void 0:i.length)?this.stripe&&this.paypal?this.renderStripeAndPayPal():this.stripe?(0,r.h)("sc-form-control",{label:this.label},(0,r.h)("div",{class:"sc-payment-label",slot:"label"},(0,r.h)("div",null,this.label),this.renderTestModeBadge()),this.stripePaymentElement?(0,r.h)("sc-card",null,this.renderStripePaymentElement()):this.renderStripePaymentElement()):this.paypal&&this.showProcessor(this.paypal)?this.renderPayPal():(console.warn(`No processors are configured for the current cart items and mode. (${this.mode})`),this.renderNoProcessors()):(console.warn("No processors are configured for this merchant."),this.renderNoProcessors())}static get watchers(){return{order:["handleOrderChange"],defaultProcessor:["handleDefaultChange"],processors:["setProcessors"],mode:["setProcessors"]}}};(0,i.o)(a,["processor","processors","order","mode","paymentMethod","loading","busy","currencyCode","stripePaymentElement"],!1),a.style="sc-payment{display:flex !important;flex-direction:column;gap:var(--sc-input-label-margin);position:relative;font-family:var(--sc-font-sans)}.sc-payment-toggle-summary{line-height:1;display:flex;align-items:center;gap:0.5em}.sc-payment-label{display:flex;justify-content:space-between}.sc-payment-instructions{color:var(--sc-color-gray-600)}.sc-payment__stripe-card-element{display:flex !important;flex-direction:column;gap:var(--sc-input-label-margin);position:relative}"}}]);
//# sourceMappingURL=7889.js.map