"use strict";(self.webpackChunksureforms=self.webpackChunksureforms||[]).push([[1379],{30:function(e,t,i){i.d(t,{a:function(){return s},c:function(){return n},h:function(){return r},i:function(){return d}});const n=e=>((null==e?void 0:e.data)||[]).map((e=>({price_id:e.price.id,quantity:e.quantity}))),d=(e,t)=>{var i;return!!((null==(i=null==t?void 0:t.line_items)?void 0:i.data)||[]).map((e=>e.price.id)).find((t=>(null==e?void 0:e.id)===t))},r=e=>{var t,i,n;return!!(null===(i=null===(t=null==e?void 0:e.line_items)||void 0===t?void 0:t.data)||void 0===i?void 0:i.length)&&(null===(n=null==e?void 0:e.line_items.data)||void 0===n?void 0:n.some((e=>{var t;return null===(t=null==e?void 0:e.price)||void 0===t?void 0:t.recurring_interval_count})))},s=e=>{var t;return r(e)&&(null===(t=null==e?void 0:e.line_items.data)||void 0===t?void 0:t.some((e=>{var t;return null===(t=null==e?void 0:e.price)||void 0===t?void 0:t.recurring_period_count})))}},1379:function(e,t,i){i.r(t),i.d(t,{sc_line_items_provider:function(){return r}});var n=i(7492),d=i(30);const r=class{constructor(e){(0,n.r)(this,e),this.scUpdateLineItems=(0,n.c)(this,"scUpdateLineItems",7),this.syncItems=[]}handleLineItemToggle(e){const t=e.detail;this.addSyncItem("toggle",t)}handleLineItemRemove(e){const t=e.detail;this.addSyncItem("remove",t)}handleLineItemAdd(e){const t=e.detail;this.addSyncItem("add",t)}handleLineItemUpdate(e){const t=e.detail;this.addSyncItem("update",t)}async syncItemsHandler(e){(null==e?void 0:e.length)&&setTimeout((()=>{var e;if(!(null===(e=this.syncItems)||void 0===e?void 0:e.length))return;const t=this.processSyncItems();this.scUpdateLineItems.emit(t),this.syncItems=[]}),100)}addSyncItem(e,t){this.syncItems=[...this.syncItems,{type:e,payload:t}]}processSyncItems(){var e;let t=(0,d.c)((null===(e=null==this?void 0:this.order)||void 0===e?void 0:e.line_items)||[]);const i={toggle:this.toggleItem,add:this.addItem,remove:this.removeItem,update:this.updateItem};return(this.syncItems||[]).forEach((e=>{t=i[e.type](e.payload,t)})),t}addItem(e,t){return[...t,e]}toggleItem(e,t){var i;const n=null===(i=t.find((t=>t.price_id===e.price_id)))||void 0===i?void 0:i.price_id;return n?t.filter((e=>n!==e.price_id)):[...t,e]}removeItem(e,t){return e.price_id?t.filter((t=>t.price_id!==e.price_id)):t}updateItem(e,t){const i=t.findIndex((t=>t.price_id===e.price_id));return-1===i?[...t,e]:(t[i]=e,t)}render(){return(0,n.h)("slot",null)}static get watchers(){return{syncItems:["syncItemsHandler"]}}}}}]);
//# sourceMappingURL=1379.js.map